

åœ¨å¤§å¤šæ•° Linux ç³»ç»Ÿä¸­ï¼ŒDocker æ˜¯é€šè¿‡ç³»ç»ŸæœåŠ¡ï¼ˆsystemdï¼‰ç®¡ç†çš„ã€‚ä»¥ä¸‹æ˜¯å¯åŠ¨ Docker çš„å‘½ä»¤ï¼š

1. å¯åŠ¨ Docker æœåŠ¡

```bash
# ä½¿ç”¨ systemctl å¯åŠ¨ Docker
sudo systemctl start docker

# è®¾ç½® Docker å¼€æœºè‡ªå¯
sudo systemctl enable docker

# æŸ¥çœ‹ Docker æœåŠ¡çŠ¶æ€
sudo systemctl status docker
```

2. é‡å¯ Docker æœåŠ¡

```bash
# é‡å¯ Docker æœåŠ¡
sudo systemctl restart docker

# æˆ–è€…å…ˆåœæ­¢å†å¯åŠ¨
sudo systemctl stop docker
sudo systemctl start docker
```



3. éªŒè¯ Docker æ˜¯å¦æ­£å¸¸è¿è¡Œ

```bash
# æ£€æŸ¥ Docker ç‰ˆæœ¬ï¼ˆéªŒè¯æœåŠ¡æ˜¯å¦è¿è¡Œï¼‰
docker --version

# è¿è¡Œæµ‹è¯•å®¹å™¨
docker run hello-world

# æŸ¥çœ‹ Docker ç³»ç»Ÿä¿¡æ¯
docker info
```

4. å¦‚æœä¸Šè¿°æ–¹æ³•ä¸è¡Œï¼Œå¯ä»¥å°è¯•

```bash
# ä½¿ç”¨ service å‘½ä»¤ï¼ˆè¾ƒè€ç³»ç»Ÿï¼‰
sudo service docker start

# æˆ–è€…ç›´æ¥å¯åŠ¨ dockerd
sudo dockerd
```

5. å¯åŠ¨åä½¿ç”¨ Docker Compose

```bash
# ç°åœ¨å¯ä»¥æ­£å¸¸ä½¿ç”¨ docker compose
docker compose up -d
docker compose ps
docker compose logs
```



6. å¸¸è§é—®é¢˜è§£å†³

æƒé™é—®é¢˜

```bash
# å°†å½“å‰ç”¨æˆ·æ·»åŠ åˆ° docker ç»„
sudo usermod -aG docker $USER

# é‡æ–°ç™»å½•æˆ–æ‰§è¡Œä»¥ä¸‹å‘½ä»¤ä½¿æƒé™ç”Ÿæ•ˆ
newgrp docker
```

ç«¯å£å†²çª

```bash
# æ£€æŸ¥ç«¯å£å ç”¨
sudo netstat -tulpn | grep :2375
```

å­˜å‚¨é—®é¢˜

```bash
# æ¸…ç† Docker å­˜å‚¨
docker system prune
```

7. åœ¨ Windows/macOS ä¸Š

å¯¹äº Docker Desktopï¼š

Â· Windows: ç›´æ¥ç‚¹å‡» Docker Desktop å›¾æ ‡å¯åŠ¨
Â· macOS: åœ¨åº”ç”¨ç¨‹åºä¸­å¯åŠ¨ Docker.app æˆ–è¿è¡Œ open /Applications/Docker.app

ä¸€èˆ¬æ¥è¯´ï¼Œåªè¦ Docker æœåŠ¡è¿è¡Œèµ·æ¥ï¼Œdocker compose å‘½ä»¤å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨äº†ã€‚



è¿™é‡Œæ•´ç†äº†ä¸€ä»½å…¨é¢çš„ Docker å‘½ä»¤å¤§å…¨ï¼Œæ¶µç›–äº†ä»åŸºç¡€åˆ°é«˜çº§çš„å¸¸ç”¨å‘½ä»¤ï¼š

ğŸ³ å®¹å™¨ç”Ÿå‘½å‘¨æœŸç®¡ç†

å®¹å™¨æ“ä½œ

```bash
# è¿è¡Œå®¹å™¨
docker run <image>                          # è¿è¡Œé•œåƒ
docker run -d <image>                       # åå°è¿è¡Œ
docker run -it <image> /bin/bash            # äº¤äº’å¼è¿è¡Œ
docker run -p 8080:80 <image>               # ç«¯å£æ˜ å°„
docker run -v /host/path:/container/path <image> # å·æŒ‚è½½
docker run --name mycontainer <image>       # æŒ‡å®šå®¹å™¨åç§°

# å®¹å™¨ç®¡ç†
docker start <container>                    # å¯åŠ¨å®¹å™¨
docker stop <container>                     # åœæ­¢å®¹å™¨
docker restart <container>                  # é‡å¯å®¹å™¨
docker pause <container>                    # æš‚åœå®¹å™¨
docker unpause <container>                  # æ¢å¤å®¹å™¨
docker kill <container>                     # å¼ºåˆ¶åœæ­¢å®¹å™¨
docker rm <container>                       # åˆ é™¤å®¹å™¨
docker rm -f <container>                    # å¼ºåˆ¶åˆ é™¤è¿è¡Œä¸­çš„å®¹å™¨
```

å®¹å™¨ä¿¡æ¯æŸ¥çœ‹

```bash
docker ps                                   # æŸ¥çœ‹è¿è¡Œä¸­çš„å®¹å™¨
docker ps -a                                # æŸ¥çœ‹æ‰€æœ‰å®¹å™¨
docker ps -l                                # æŸ¥çœ‹æœ€è¿‘åˆ›å»ºçš„å®¹å™¨
docker ps -q                                # åªæ˜¾ç¤ºå®¹å™¨ID
docker logs <container>                     # æŸ¥çœ‹å®¹å™¨æ—¥å¿—
docker logs -f <container>                  # å®æ—¶æŸ¥çœ‹æ—¥å¿—
docker logs --tail 100 <container>          # æŸ¥çœ‹æœ€å100è¡Œæ—¥å¿—
docker inspect <container>                  # æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯
docker stats <container>                    # æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨æƒ…å†µ
docker top <container>                      # æŸ¥çœ‹å®¹å™¨å†…è¿›ç¨‹
```

ğŸ“¦ é•œåƒç®¡ç†

é•œåƒæ“ä½œ

```bash
# é•œåƒæŸ¥æ‰¾å’Œæ‹‰å–
docker search <term>                        # æœç´¢é•œåƒ
docker pull <image>                         # æ‹‰å–é•œåƒ
docker pull <image>:<tag>                   # æ‹‰å–æŒ‡å®šæ ‡ç­¾çš„é•œåƒ

# é•œåƒç®¡ç†
docker images                               # åˆ—å‡ºæœ¬åœ°é•œåƒ
docker rmi <image>                          # åˆ é™¤é•œåƒ
docker rmi -f <image>                       # å¼ºåˆ¶åˆ é™¤é•œåƒ
docker image prune                          # åˆ é™¤æœªä½¿ç”¨çš„é•œåƒ
docker history <image>                      # æŸ¥çœ‹é•œåƒå†å²
docker tag <image> newname:tag              # ç»™é•œåƒæ‰“æ ‡ç­¾
```

é•œåƒæ„å»º

```bash
docker build .                              # æ„å»ºé•œåƒ
docker build -t myimage:tag .               # æ„å»ºå¹¶æ‰“æ ‡ç­¾
docker build -f Dockerfile.dev .            # æŒ‡å®š Dockerfile
docker build --no-cache .                   # ä¸ä½¿ç”¨ç¼“å­˜æ„å»º
```

ğŸ”„ å®¹å™¨ä¸ä¸»æœºäº¤äº’

æ‰§è¡Œå‘½ä»¤

```bash
docker exec -it <container> /bin/bash       # è¿›å…¥å®¹å™¨
docker exec <container> <command>           # åœ¨å®¹å™¨ä¸­æ‰§è¡Œå‘½ä»¤
docker exec -u root <container> /bin/bash   # ä»¥rootç”¨æˆ·è¿›å…¥
```

æ–‡ä»¶æ“ä½œ

```bash
docker cp <container>:<path> <host_path>    # ä»å®¹å™¨å¤åˆ¶æ–‡ä»¶åˆ°ä¸»æœº
docker cp <host_path> <container>:<path>    # ä»ä¸»æœºå¤åˆ¶æ–‡ä»¶åˆ°å®¹å™¨
```

ğŸŒ ç½‘ç»œç®¡ç†

ç½‘ç»œæ“ä½œ

```bash
docker network ls                           # åˆ—å‡ºç½‘ç»œ
docker network create <network_name>        # åˆ›å»ºç½‘ç»œ
docker network rm <network_name>            # åˆ é™¤ç½‘ç»œ
docker network inspect <network_name>       # æŸ¥çœ‹ç½‘ç»œè¯¦æƒ…

# å®¹å™¨ç½‘ç»œ
docker run --network=<network> <image>      # æŒ‡å®šç½‘ç»œè¿è¡Œå®¹å™¨
docker network connect <network> <container> # è¿æ¥å®¹å™¨åˆ°ç½‘ç»œ
docker network disconnect <network> <container> # æ–­å¼€å®¹å™¨ç½‘ç»œ
```

ç«¯å£ç®¡ç†

```bash
docker port <container>                     # æŸ¥çœ‹å®¹å™¨ç«¯å£æ˜ å°„
```

ğŸ’¾ æ•°æ®å·ç®¡ç†

å·æ“ä½œ

```bash
docker volume ls                            # åˆ—å‡ºå·
docker volume create <volume_name>          # åˆ›å»ºå·
docker volume rm <volume_name>              # åˆ é™¤å·
docker volume inspect <volume_name>         # æŸ¥çœ‹å·è¯¦æƒ…
docker volume prune                         # åˆ é™¤æœªä½¿ç”¨çš„å·
```

å·ä½¿ç”¨

```bash
docker run -v /data <image>                 # åˆ›å»ºåŒ¿åå·
docker run -v volume_name:/data <image>     # ä½¿ç”¨å‘½åå·
docker run -v /host/path:/container/path <image> # ç»‘å®šæŒ‚è½½
```

ğŸ› ï¸ ç³»ç»Ÿç®¡ç†

Docker ç³»ç»Ÿä¿¡æ¯

```bash
docker info                                 # æ˜¾ç¤º Docker ç³»ç»Ÿä¿¡æ¯
docker version                              # æ˜¾ç¤º Docker ç‰ˆæœ¬ä¿¡æ¯
docker system df                            # æŸ¥çœ‹ç£ç›˜ä½¿ç”¨æƒ…å†µ
docker system prune                         # æ¸…ç†æœªä½¿ç”¨çš„æ•°æ®
docker system prune -a                      # æ¸…ç†æ‰€æœ‰æœªä½¿ç”¨çš„æ•°æ®
```

äº‹ä»¶å’Œç›‘æ§

```bash
docker events                               # æŸ¥çœ‹ Docker äº‹ä»¶
docker stats                                # æŸ¥çœ‹æ‰€æœ‰å®¹å™¨èµ„æºä½¿ç”¨
```

ğŸš€ å®ç”¨å‘½ä»¤ç»„åˆ

å¼€å‘å¸¸ç”¨

```bash
# å¼€å‘ç¯å¢ƒå¿«é€Ÿå¯åŠ¨
docker run -d -p 80:80 --name webserver nginx
docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=pass --name mysql mysql:8.0

# è¿›å…¥å®¹å™¨è°ƒè¯•
docker exec -it webserver /bin/bash
docker exec -it mysql mysql -uroot -p

# æŸ¥çœ‹æ—¥å¿—
docker logs -f webserver
```

æ¸…ç†å’Œç»´æŠ¤

```bash
# åœæ­¢æ‰€æœ‰å®¹å™¨
docker stop $(docker ps -aq)

# åˆ é™¤æ‰€æœ‰å®¹å™¨
docker rm $(docker ps -aq)

# åˆ é™¤æ‰€æœ‰é•œåƒ
docker rmi $(docker images -q)

# ç³»ç»Ÿæ¸…ç†
docker system prune -a -f
```

ğŸ”§ Docker Compose å¸¸ç”¨å‘½ä»¤

```bash
docker-compose up                          # å¯åŠ¨æœåŠ¡
docker-compose up -d                       # åå°å¯åŠ¨æœåŠ¡
docker-compose down                        # åœæ­¢æœåŠ¡
docker-compose ps                          # æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose logs                        # æŸ¥çœ‹æœåŠ¡æ—¥å¿—
docker-compose logs -f                     # å®æ—¶æŸ¥çœ‹æ—¥å¿—
docker-compose build                       # æ„å»ºé•œåƒ
docker-compose exec <service> <command>    # åœ¨æœåŠ¡ä¸­æ‰§è¡Œå‘½ä»¤
docker-compose restart                     # é‡å¯æœåŠ¡
docker-compose pull                        # æ‹‰å–é•œåƒ
```

âš¡ é«˜çº§åŠŸèƒ½

å®¹å™¨èµ„æºé™åˆ¶

```bash
docker run -m 512m <image>                 # å†…å­˜é™åˆ¶
docker run --cpus=1.5 <image>              # CPUé™åˆ¶
docker run --memory-swap=1g <image>        # å†…å­˜+äº¤æ¢åˆ†åŒºé™åˆ¶
```

ç¯å¢ƒå˜é‡

```bash
docker run -e VAR=value <image>            # è®¾ç½®ç¯å¢ƒå˜é‡
docker run --env-file .env <image>         # ä»æ–‡ä»¶è¯»å–ç¯å¢ƒå˜é‡
```

ğŸ“ å®ç”¨æŠ€å·§

1. æ‰¹é‡æ“ä½œ

```bash
# æ‰¹é‡åœæ­¢å’Œåˆ é™¤
docker stop $(docker ps -q)
docker rm $(docker ps -aq)

# æ‰¹é‡åˆ é™¤é•œåƒ
docker rmi $(docker images -q)
```

2. è°ƒè¯•æŠ€å·§

```bash
# æŸ¥çœ‹å®¹å™¨è¯¦ç»†ä¿¡æ¯
docker inspect <container> | grep IPAddress

# æŸ¥çœ‹å®¹å™¨èµ„æºä½¿ç”¨
docker stats --no-stream

# å¯¼å‡ºå¯¼å…¥å®¹å™¨
docker export <container> > container.tar
docker import container.tar newimage:tag
```

3. æ—¥å¿—ç®¡ç†

```bash
# æ—¥å¿—é©±åŠ¨é€‰é¡¹
docker run --log-driver=json-file --log-opt max-size=10m <image>
```

ğŸ¯ å¸¸ç”¨åœºæ™¯ç¤ºä¾‹

Web åº”ç”¨éƒ¨ç½²

```bash
# è¿è¡Œ Nginx
docker run -d -p 80:80 -v /html:/usr/share/nginx/html nginx

# è¿è¡Œ Node.js åº”ç”¨
docker run -d -p 3000:3000 -v $(pwd):/app node:14 node /app/app.js
```

æ•°æ®åº“æœåŠ¡

```bash
# MySQL
docker run -d -p 3306:3306 -e MYSQL_ROOT_PASSWORD=pass -v mysql_data:/var/lib/mysql mysql:8.0

# Redis
docker run -d -p 6379:6379 -v redis_data:/data redis:6.0
```

è¿™ä»½å‘½ä»¤å¤§å…¨æ¶µç›–äº† Docker çš„ä¸»è¦ä½¿ç”¨åœºæ™¯ï¼Œå»ºè®®æ ¹æ®å®é™…éœ€æ±‚é€‰æ‹©åˆé€‚çš„å‘½ä»¤ç»„åˆã€‚è®°ä½åœ¨ä½¿ç”¨åˆ é™¤å‘½ä»¤æ—¶è¦ç‰¹åˆ«å°å¿ƒï¼Œé¿å…è¯¯åˆ é‡è¦æ•°æ®ï¼

