对于将多个文件中的 data class 统一迁移到新文件，IntelliJ IDEA 提供了多种自动化方法：

1. 最常用的：Move Refactoring（移动重构）

```kotlin
// 在源文件中选中 data class
data class User(val name: String, val age: Int)

// 操作：
// 1. 右键点击 User → Refactor → Move (F6)
// 2. 选择目标文件，或创建新文件
// 3. 自动处理所有导入引用
```

2. 批量移动多个 Data Class

```kotlin
// 在 Project 视图：
// 1. 选中多个文件或类
// 2. Refactor → Move
// 3. 选择"Move to separate file"或指定已有文件
```

3. 提取到新文件（推荐方法）

```kotlin
// 当 data class 在同一个文件中：
class Service { /* ... */ }
data class User(val name: String, val age: Int)
data class Product(val id: Long, val name: String)

// 操作：
// 1. 选中 User 和 Product
// 2. Refactor → Move → Move to another file
// 3. 输入新文件名，如 models.kt
```

4. 使用 Paste Special（粘贴特殊）

```kotlin
// 1. 从不同文件复制多个 data class
// 2. 在目标文件点击 Edit → Paste Special → Paste from History
// 3. 选择多个复制的类，自动合并
```

5. Find Usages + Replace（处理引用）

```kotlin
// 移动后自动更新所有引用：
// 1. 移动 data class 后，IDEA 会自动询问是否更新引用
// 2. 选择 "Do refactor" 自动更新所有导入

// 如果引用未自动更新：
// 1. 右键类名 → Find Usages (Alt+F7)
// 2. 查看所有使用位置
// 3. 手动或批量修改导入
```

6. 通过剪贴板合并

```kotlin
// 快速合并到新文件：
// 1. 在 A.kt 中：Copy data class
// 2. 在 B.kt 中：Copy data class  
// 3. 新建 Models.kt：粘贴两个类
// 4. IDEA 会自动建议添加缺少的导入
```

7. 使用 File Structure 视图

```kotlin
// 操作步骤：
// 1. 打开包含多个 data class 的文件
// 2. View → Tool Windows → Structure (Alt+7)
// 3. 在 Structure 视图中拖拽类到目标文件
```

8. 脚本自动化（批量处理）

```kotlin
// 对于大量文件，可使用脚本：
// 查找所有 data class 并移动到指定文件

// 使用 IntelliJ 的 Structural Search:
// 1. Edit → Find → Search Structurally
// 2. 模板: data class $Class$($Parameter$*)
// 3. 批量操作结果
```

9. 安全迁移步骤

```kotlin
// 推荐流程：
1. 先创建新的目标文件（如 Models.kt）
2. 将第一个 data class 移动到新文件
3. 确认所有引用正确更新
4. 逐步移动其他 data class
5. 运行测试验证
```

注意事项

1. 包声明一致性：确保移动后包名正确
2. 导入冲突：检查是否有同名类冲突
3. 可见性修饰符：internal 类只能在同模块移动
4. 依赖关系：注意类之间的依赖顺序

快速验证命令

```kotlin
// 移动后验证：
// 1. Build → Rebuild Project (Ctrl+Shift+F9)
// 2. 检查是否有编译错误
// 3. 运行相关测试
```

插件辅助

· Move to Another File Plugin：增强的移动功能
· Structure Search and Replace：批量重构插件

最安全高效的方法是：逐个使用 Move Refactoring (F6)，IntelliJ 会自动处理90%的迁移工作，包括更新所有引用和导入语句。
