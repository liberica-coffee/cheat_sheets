Kotlin override è¯¦è§£

override æ˜¯ Kotlin ä¸­éå¸¸é‡è¦çš„å…³é”®å­—ï¼Œç”¨äºæ˜¾å¼å£°æ˜è¦†ç›–ï¼ˆé‡å†™ï¼‰çˆ¶ç±»æˆ–æ¥å£ä¸­çš„æˆå‘˜ã€‚

ğŸ¯ åŸºæœ¬æ¦‚å¿µ

```kotlin
// çˆ¶ç±»/åŸºç±»
open class Animal {
    open fun makeSound() = "Animal sound"
    open val name: String = "Animal"
}

// å­ç±»
class Dog : Animal() {
    // ä½¿ç”¨ override å…³é”®å­—è¦†ç›–çˆ¶ç±»æ–¹æ³•
    override fun makeSound() = "Woof!"
    
    // ä½¿ç”¨ override å…³é”®å­—è¦†ç›–çˆ¶ç±»å±æ€§
    override val name: String = "Dog"
}
```

ğŸ“‹ ä¸ºä»€ä¹ˆéœ€è¦ overrideï¼Ÿ

1. å®‰å…¨è®¾è®¡åŸåˆ™

Kotlin é»˜è®¤æ‰€æœ‰ç±»å’Œæ–¹æ³•éƒ½æ˜¯ final çš„ï¼ˆä¸å¯ç»§æ‰¿/è¦†ç›–ï¼‰ï¼Œå¿…é¡»æ˜¾å¼ä½¿ç”¨ open å’Œ overrideï¼š

```kotlin
class Base {
    // é»˜è®¤æ˜¯ finalï¼Œä¸èƒ½è¢«å­ç±»è¦†ç›–
    fun finalMethod() = "Cannot override"
    
    // å¿…é¡»æ ‡è®° open æ‰èƒ½è¢«è¦†ç›–
    open fun overridableMethod() = "Can override"
}

class Derived : Base() {
    // âŒ ç¼–è¯‘é”™è¯¯ï¼šä¸èƒ½è¦†ç›– final æ–¹æ³•
    // override fun finalMethod() = "New implementation"
    
    // âœ… æ­£ç¡®ï¼šæ˜¾å¼å£°æ˜è¦†ç›–
    override fun overridableMethod() = "New implementation"
}
```

2. ç¼–è¯‘å™¨æ£€æŸ¥

```kotlin
open class Parent {
    open fun method() { println("Parent") }
}

class Child : Parent() {
    // âŒ ç¼–è¯‘é”™è¯¯ï¼šæ‹¼å†™é”™è¯¯ä¼šè¢«ç«‹å³å‘ç°
    // override fun methid() { ... }  
    
    // âœ… æ­£ç¡®ï¼šç¼–è¯‘å™¨ç¡®ä¿æ–¹æ³•åã€å‚æ•°ã€è¿”å›ç±»å‹å®Œå…¨åŒ¹é…
    override fun method() { println("Child") }
}
```

ğŸ”„ å¯ä»¥è¦†ç›–çš„å†…å®¹

1. è¦†ç›–æ–¹æ³•

```kotlin
open class Shape {
    open fun draw() { println("Drawing shape") }
}

class Circle : Shape() {
    override fun draw() {
        println("Drawing circle")
        super.draw()  // è°ƒç”¨çˆ¶ç±»å®ç°
    }
}
```

2. è¦†ç›–å±æ€§

```kotlin
open class Vehicle {
    // å¯è¦†ç›–çš„å±æ€§
    open val maxSpeed: Int = 100
    
    // å¸¦è‡ªå®šä¹‰getterçš„å¯è¦†ç›–å±æ€§
    open val type: String
        get() = "Generic Vehicle"
}

class Car : Vehicle() {
    // è¦†ç›–å±æ€§
    override val maxSpeed: Int = 200
    
    // è¦†ç›–å¸¦getterçš„å±æ€§
    override val type: String
        get() = "Sports Car"
}

class Bike : Vehicle() {
    // ä½¿ç”¨æ„é€ å‡½æ•°å‚æ•°åˆå§‹åŒ–è¦†ç›–çš„å±æ€§
    override val maxSpeed: Int
    
    init {
        maxSpeed = 80  // å¯ä»¥å»¶è¿Ÿåˆå§‹åŒ–
    }
}
```

3. è¦†ç›–æŠ½è±¡æˆå‘˜

```kotlin
abstract class Repository {
    abstract fun save(data: String)
    abstract val version: String
}

class FileRepository : Repository() {
    override fun save(data: String) {
        println("Saving to file: $data")
    }
    
    override val version: String = "1.0"
}
```

4. è¦†ç›–æ¥å£æˆå‘˜

```kotlin
interface Clickable {
    fun click()
    fun show() = println("Clickable")  // é»˜è®¤å®ç°
}

interface Focusable {
    fun show() = println("Focusable")  // å¦ä¸€ä¸ªé»˜è®¤å®ç°
}

class Button : Clickable, Focusable {
    // å¿…é¡»å®ç°æŠ½è±¡æ–¹æ³•
    override fun click() = println("Button clicked")
    
    // å¤šä¸ªæ¥å£æœ‰ç›¸åŒé»˜è®¤æ–¹æ³•æ—¶ï¼Œå¿…é¡»æ˜¾å¼è¦†ç›–
    override fun show() {
        super<Clickable>.show()  // è°ƒç”¨æŒ‡å®šçˆ¶æ¥å£çš„å®ç°
        super<Focusable>.show()
        println("Button show")
    }
}
```

ğŸ› ï¸ override çš„é«˜çº§ç”¨æ³•

1. è¦†ç›–è§„åˆ™ä¸é™åˆ¶

```kotlin
open class Parent {
    open fun method(value: Int): String = "Parent: $value"
}

class Child : Parent() {
    // âœ… è¿”å›ç±»å‹å¯ä»¥æ˜¯çˆ¶ç±»è¿”å›ç±»å‹çš„å­ç±»å‹ï¼ˆåå˜ï¼‰
    override fun method(value: Int): String? = 
        if (value > 0) "Child: $value" else null
    
    // âŒ å‚æ•°ç±»å‹å¿…é¡»å®Œå…¨åŒ¹é…
    // override fun method(value: Double): String = "Error"
    
    // âœ… å¯ä»¥æ·»åŠ é»˜è®¤å‚æ•°ï¼ˆä¸å½±å“è¦†ç›–ï¼‰
    override fun method(value: Int, prefix: String = "Child"): String? =
        "$prefix: $value"
}
```

2. è¦†ç›– val å’Œ var çš„åŒºåˆ«

```kotlin
open class Base {
    open val readOnly: String = "Base readOnly"
    open var readWrite: String = "Base readWrite"
}

class Derived : Base() {
    // âœ… val å¯ä»¥è¦†ç›–ä¸º val
    override val readOnly: String = "Derived readOnly"
    
    // âœ… var å¯ä»¥è¦†ç›– var
    override var readWrite: String = "Derived readWrite"
    
    // âŒ val ä¸èƒ½è¦†ç›–ä¸º var
    // override var readOnly: String = "Error"
    
    // âŒ var ä¸èƒ½è¦†ç›–ä¸º val
    // override val readWrite: String = "Error"
}
```

3. åˆå§‹åŒ–é¡ºåºé—®é¢˜

```kotlin
open class Parent {
    open val value: Int = 1
    init {
        println("Parent init: value = $value")
    }
}

class Child : Parent() {
    override val value: Int = 2
    init {
        println("Child init: value = $value")
    }
}

// è¾“å‡ºï¼š
// Parent init: value = 0  â— æ³¨æ„ï¼šä½¿ç”¨çš„æ˜¯é»˜è®¤å€¼0ï¼Œä¸æ˜¯1æˆ–2
// Child init: value = 2
```

è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ open fun æ›¿ä»£ open val

```kotlin
open class SafeParent {
    open fun getValue(): Int = 1
    init {
        println("Parent init: value = ${getValue()}")
    }
}

class SafeChild : SafeParent() {
    override fun getValue(): Int = 2
    init {
        println("Child init: value = ${getValue()}")
    }
}
// è¾“å‡ºï¼š
// Parent init: value = 2  âœ…
// Child init: value = 2
```

ğŸ® å®é™…åº”ç”¨åœºæ™¯

1. æ¨¡æ¿æ–¹æ³•æ¨¡å¼

```kotlin
abstract class DataProcessor {
    // æ¨¡æ¿æ–¹æ³•ï¼ˆä¸å¯è¦†ç›–ï¼‰
    fun process(): String {
        val data = loadData()
        val processed = transform(data)
        return save(processed)
    }
    
    // æŠ½è±¡æ–¹æ³•ï¼ˆå¿…é¡»è¦†ç›–ï¼‰
    abstract fun loadData(): String
    
    // é’©å­æ–¹æ³•ï¼ˆå¯é€‰è¦†ç›–ï¼‰
    open fun transform(data: String): String = data.uppercase()
    
    abstract fun save(data: String): String
}

class FileProcessor : DataProcessor() {
    override fun loadData() = "data from file"
    
    override fun transform(data: String) = 
        super.transform(data).reversed()  // å¢å¼ºçˆ¶ç±»å®ç°
    
    override fun save(data: String) = "Saved to file: $data"
}
```

2. Android å¼€å‘ç¤ºä¾‹

```kotlin
// è¦†ç›– Activity ç”Ÿå‘½å‘¨æœŸæ–¹æ³•
class MainActivity : AppCompatActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)  // å¿…é¡»è°ƒç”¨çˆ¶ç±»å®ç°
        setContentView(R.layout.activity_main)
        // è‡ªå®šä¹‰åˆå§‹åŒ–ä»£ç 
    }
    
    override fun onResume() {
        super.onResume()
        // æ¢å¤é€»è¾‘
    }
}
```

3. æ•°æ®ç±»è¦†ç›–

```kotlin
open class Entity(val id: Int)

data class User(
    val name: String,
    val email: String
) : Entity(1) {
    // æ•°æ®ç±»ä¹Ÿå¯ä»¥è¦†ç›–æ–¹æ³•
    override fun toString(): String {
        return "User(name='$name', email='$email')"
    }
}
```

âš ï¸ å¸¸è§é”™è¯¯ä¸æ³¨æ„äº‹é¡¹

1. å¿˜è®°è°ƒç”¨ super

```kotlin
open class Parent {
    open fun setup() {
        println("Essential parent setup")
    }
}

class Child : Parent() {
    override fun setup() {
        // âŒ å±é™©ï¼šå¯èƒ½é—æ¼é‡è¦åˆå§‹åŒ–
        // println("Child setup only")
        
        // âœ… æ­£ç¡®ï¼šå…ˆè°ƒç”¨çˆ¶ç±»
        super.setup()
        println("Child setup")
    }
}
```

2. é”™è¯¯çš„ä½¿ç”¨åœºæ™¯

```kotlin
// âŒ ä¸è¦æ»¥ç”¨è¦†ç›–æ¥å®ç°å®Œå…¨ä¸åŒçš„åŠŸèƒ½
open class Calculator {
    open fun calculate(a: Int, b: Int): Int = a + b
}

class Multiplier : Calculator() {
    // âŒ è¯­ä¹‰é”™è¯¯ï¼šcalculate åº”è¯¥æ‰§è¡ŒåŠ æ³•ï¼Œä¸æ˜¯ä¹˜æ³•
    override fun calculate(a: Int, b: Int): Int = a * b
    
    // âœ… æ­£ç¡®ï¼šæ·»åŠ æ–°æ–¹æ³•
    fun multiply(a: Int, b: Int): Int = a * b
}
```

3. è¦†ç›–èŒƒå›´é™åˆ¶

```kotlin
class Outer {
    private open class Inner {
        open fun method() = "Inner"
    }
    
    class SubInner : Inner() {
        // âœ… å¯ä»¥è¦†ç›–ï¼Œå› ä¸º SubInner èƒ½çœ‹åˆ° Inner
        override fun method() = "SubInner"
    }
}

// âŒ ä¸èƒ½åœ¨å¤–éƒ¨è¦†ç›–ç§æœ‰ç±»çš„æˆå‘˜
// class External : Outer.Inner()
```

ğŸ’¡ æœ€ä½³å®è·µ

1. éµå¾ªé‡Œæ°æ›¿æ¢åŸåˆ™ï¼šå­ç±»åº”è¯¥èƒ½æ›¿æ¢çˆ¶ç±»è€Œä¸å½±å“ç¨‹åºæ­£ç¡®æ€§
2. å§‹ç»ˆè°ƒç”¨ superï¼šé™¤éä½ æ˜ç¡®çŸ¥é“ä¸éœ€è¦çˆ¶ç±»é€»è¾‘
3. ä¿æŒè¯­ä¹‰ä¸€è‡´ï¼šè¦†ç›–çš„æ–¹æ³•åº”è¯¥ä¿æŒå’Œçˆ¶ç±»ç›¸åŒçš„"å¥‘çº¦"
4. ä½¿ç”¨ final ä¿æŠ¤ï¼šæ˜ç¡®å“ªäº›æ–¹æ³•ä¸åº”è¯¥è¢«è¦†ç›–
5. ä¼˜å…ˆä½¿ç”¨æ¥å£ï¼šè€ƒè™‘æ˜¯å¦çœŸçš„éœ€è¦ç±»ç»§æ‰¿ï¼Œè¿˜æ˜¯æ¥å£å®ç°æ›´åˆé€‚

```kotlin
// å¥½ä¾‹å­ï¼šæ¸…æ™°çš„ç»§æ‰¿å±‚æ¬¡
open class PaymentMethod {
    open fun process(amount: Double): Boolean {
        validate()
        return executePayment(amount)
    }
    
    open fun validate() = true
    abstract fun executePayment(amount: Double): Boolean
}

class CreditCard : PaymentMethod() {
    override fun executePayment(amount: Double): Boolean {
        println("Processing credit card: $$amount")
        return true
    }
    
    override fun validate(): Boolean {
        println("Validating credit card...")
        return super.validate()  // è°ƒç”¨çˆ¶ç±»éªŒè¯
    }
}
```

è®°ä½ï¼šoverride ä¸æ˜¯éšä¾¿ä½¿ç”¨çš„å·¥å…·ï¼Œè€Œæ˜¯è®¾è®¡å†³ç­–çš„æ˜ç¡®å£°æ˜ã€‚æ¯æ¬¡ä½¿ç”¨ override æ—¶ï¼Œéƒ½åº”è¯¥æ€è€ƒï¼š"è¿™ä¸ªç±»çœŸçš„æ˜¯é‚£ç§ç±»å‹å—ï¼Ÿ"

ä½ åœ¨å®é™…é¡¹ç›®ä¸­é‡åˆ° override çš„å…·ä½“é—®é¢˜äº†å—ï¼Ÿæˆ‘å¯ä»¥é’ˆå¯¹ä½ çš„åœºæ™¯æä¾›æ›´å…·ä½“çš„å»ºè®®ï¼