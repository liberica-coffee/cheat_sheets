å¥½é—®é¢˜ ğŸ‘ã€‚åœ¨ Spring Boot + Gradle + Kotlin é¡¹ç›®ä¸­ï¼Œå¦‚æœä½ æƒ³æ·»åŠ ä¸€äº›é¢å¤–çš„å¤„ç†é€»è¾‘ï¼ˆä¾‹å¦‚æ•°æ®é¢„å¤„ç†ã€ä»£ç ç”Ÿæˆã€æ–‡ä»¶æ“ä½œï¼‰ï¼Œä½†åˆä¸å¸Œæœ›å½±å“åˆ° Spring Boot åº”ç”¨çš„æ­£å¸¸è¿è¡Œï¼Œå¯ä»¥é‡‡ç”¨ä»¥ä¸‹å‡ ç§å¸¸è§æ–¹å¼ï¼š

---

ğŸ›  æ–¹æ³•ä¸€ï¼šGradle è‡ªå®šä¹‰ä»»åŠ¡

Gradle æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ„å»ºå·¥å…·ï¼Œä½ å¯ä»¥åœ¨ build.gradle.kts ä¸­å®šä¹‰é¢å¤–çš„ä»»åŠ¡ã€‚

// build.gradle.kts
tasks.register("extraTask") {
    group = "custom"
    description = "Run extra processing script"
    doLast {
        println("Running extra script...")
        // è¿™é‡Œå¯ä»¥è°ƒç”¨å¤–éƒ¨è„šæœ¬æˆ–ç›´æ¥å†™é€»è¾‘
        exec {
            commandLine("sh", "scripts/myscript.sh")
        }
    }
}


â€¢ åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º scripts/myscript.shï¼ˆæˆ– .bat/.ps1ï¼‰ã€‚
â€¢ æ‰§è¡Œï¼š./gradlew extraTask
â€¢ ä¼˜ç‚¹ï¼šä¸ä¼šå½±å“ Spring Boot çš„è¿è¡Œï¼Œåªåœ¨ä½ éœ€è¦æ—¶æ‰§è¡Œã€‚


---

ğŸ›  æ–¹æ³•äºŒï¼šç‹¬ç«‹ Kotlin/Java è„šæœ¬

åˆ©ç”¨ Kotlin çš„ script åŠŸèƒ½ï¼ˆ.kts æ–‡ä»¶ï¼‰ï¼Œä½ å¯ä»¥å†™ä¸€ä¸ªç‹¬ç«‹çš„è„šæœ¬æ–‡ä»¶ã€‚

ä¾‹å¦‚åœ¨ scripts/ExtraProcessing.ktsï¼š

#!/usr/bin/env kotlin
println("Running extra Kotlin script...")
// è¿™é‡Œå†™ä½ éœ€è¦çš„é€»è¾‘ï¼Œæ¯”å¦‚æ–‡ä»¶å¤„ç†ã€APIè°ƒç”¨ç­‰


â€¢ ç»™æ–‡ä»¶åŠ æ‰§è¡Œæƒé™ï¼šchmod +x scripts/ExtraProcessing.kts
â€¢ æ‰§è¡Œï¼š./scripts/ExtraProcessing.kts
â€¢ ä¼˜ç‚¹ï¼šå®Œå…¨ç‹¬ç«‹ï¼Œä¸ä¾èµ– Spring Bootã€‚


---

ğŸ›  æ–¹æ³•ä¸‰ï¼šGradle Source Set åˆ†ç¦»

å¦‚æœä½ å¸Œæœ›ç”¨ Kotlin ç¼–è¯‘å¥½çš„ç±»æ¥åšé¢å¤–å¤„ç†ï¼Œå¯ä»¥å®šä¹‰ä¸€ä¸ªå•ç‹¬çš„ source setã€‚

// build.gradle.kts
sourceSets {
    create("scripts") {
        kotlin.srcDir("src/scripts/kotlin")
    }
}

tasks.register<JavaExec>("runScript") {
    group = "custom"
    description = "Run Kotlin script class"
    classpath = sourceSets["scripts"].runtimeClasspath
    mainClass.set("com.example.scripts.MyScriptKt")
}


â€¢ åœ¨ src/scripts/kotlin/com/example/scripts/MyScript.kt å†™é€»è¾‘ã€‚
â€¢ æ‰§è¡Œï¼š./gradlew runScript
â€¢ ä¼˜ç‚¹ï¼šè„šæœ¬ä»£ç ä»ç„¶åœ¨ Kotlin é¡¹ç›®é‡Œï¼Œä½†ä¸ä¼šå’Œ Spring Boot ä¸»åº”ç”¨æ··åœ¨ä¸€èµ·ã€‚


---

ğŸ›  æ–¹æ³•å››ï¼šå¤–éƒ¨å·¥å…·/å®¹å™¨åŒ–

å¦‚æœæ˜¯æ¯”è¾ƒé‡é‡çº§çš„å¤„ç†ï¼ˆæ¯”å¦‚æ•°æ®è¿ç§»ã€æ‰¹å¤„ç†ï¼‰ï¼Œå¯ä»¥ï¼š

â€¢ å†™ä¸€ä¸ª ç‹¬ç«‹çš„ CLI åº”ç”¨ï¼ˆKotlin + Gradle Application pluginï¼‰ã€‚
â€¢ æˆ–è€…ç”¨ Docker Compose å®šä¹‰ä¸€ä¸ªé¢å¤–çš„æœåŠ¡å®¹å™¨ï¼Œå’Œ Spring Boot åˆ†å¼€è¿è¡Œã€‚


---

âœ… æ€»ç»“ï¼š

â€¢ è½»é‡å¤„ç† â†’ ç”¨ Gradle è‡ªå®šä¹‰ä»»åŠ¡æˆ– Kotlin .kts è„šæœ¬ã€‚
â€¢ ä¸­ç­‰å¤æ‚åº¦ â†’ ç”¨ Gradle source set + JavaExecã€‚
â€¢ é‡é‡çº§å¤„ç† â†’ ç‹¬ç«‹ CLI æˆ–å®¹å™¨åŒ–ã€‚


---

è¦ä¸è¦æˆ‘å¸®ä½ å†™ä¸€ä¸ª å®Œæ•´çš„ Gradle + Kotlin ç¤ºä¾‹ï¼Œå±•ç¤ºå¦‚ä½•åœ¨ src/scripts/kotlin ä¸‹å†™è„šæœ¬å¹¶é€šè¿‡ ./gradlew runScript æ‰§è¡Œï¼Ÿ
