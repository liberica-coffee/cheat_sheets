æˆ‘å°†ä¸ºä½ è¯¦ç»†è§£æä¸€ä¸ªåŸºäº Spring Boot + Gradle + Kotlin + MyBatis + PostgreSQL/AWS Aurora é¡¹ç›®çš„å®Œæ•´ç›®å½•ç»“æ„å’Œå„å±‚å«ä¹‰ã€‚

ğŸ“ é¡¹ç›®æ ‡å‡†ç›®å½•ç»“æ„

```
my-project/
â”œâ”€â”€ ğŸ“‚ gradle/                          # Gradle Wrapper æ–‡ä»¶
â”‚   â””â”€â”€ wrapper/
â”œâ”€â”€ ğŸ“‚ src/                             # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ ğŸ“‚ main/                        # ä¸»æºä»£ç 
â”‚   â”‚   â”œâ”€â”€ ğŸ“‚ kotlin/                  # Kotlin æºä»£ç 
â”‚   â”‚   â”‚   â””â”€â”€ com/example/myapp/      # åŒ…ç»“æ„æ ¹ç›®å½•
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ config/          # é…ç½®ç±»
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ DatabaseConfig.kt     # æ•°æ®åº“é…ç½®
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ MyBatisConfig.kt      # MyBatis é…ç½®
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ WebConfig.kt          # Web ç›¸å…³é…ç½®
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ controller/      # æ§åˆ¶å™¨å±‚ï¼ˆAPI å…¥å£ï¼‰
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ UserController.kt     # ç”¨æˆ·ç›¸å…³ API
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ProductController.kt  # äº§å“ç›¸å…³ API
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ service/         # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“‚ impl/        # ä¸šåŠ¡é€»è¾‘å®ç°
â”‚   â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ UserServiceImpl.kt
â”‚   â”‚   â”‚       â”‚   â”‚   â””â”€â”€ ProductServiceImpl.kt
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ UserService.kt  # æœåŠ¡æ¥å£
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ repository/      # æ•°æ®è®¿é—®å±‚ï¼ˆMyBatisï¼‰
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ UserRepository.kt     # ç”¨æˆ·æ•°æ®æ¥å£
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ProductRepository.kt  # äº§å“æ•°æ®æ¥å£
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ model/           # æ•°æ®æ¨¡å‹
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“‚ entity/      # æ•°æ®åº“å®ä½“
â”‚   â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ UserEntity.kt     # å¯¹åº”æ•°æ®åº“è¡¨
â”‚   â”‚   â”‚       â”‚   â”‚   â””â”€â”€ ProductEntity.kt
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ ğŸ“‚ dto/         # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”‚       â”‚   â”‚   â”œâ”€â”€ UserDto.kt        # API è¯·æ±‚/å“åº”å¯¹è±¡
â”‚   â”‚   â”‚       â”‚   â”‚   â””â”€â”€ ProductDto.kt
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ğŸ“‚ request/     # API è¯·æ±‚å¯¹è±¡
â”‚   â”‚   â”‚       â”‚       â”œâ”€â”€ CreateUserRequest.kt
â”‚   â”‚   â”‚       â”‚       â””â”€â”€ UpdateProductRequest.kt
â”‚   â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ mapper/          # MyBatis XML Mapper æ¥å£
â”‚   â”‚   â”‚       â”‚   â”œâ”€â”€ UserMapper.kt         # å¯¹åº” XML çš„æ¥å£
â”‚   â”‚   â”‚       â”‚   â””â”€â”€ ProductMapper.kt
â”‚   â”‚   â”‚       â””â”€â”€ Application.kt      # Spring Boot ä¸»å¯åŠ¨ç±»
â”‚   â”‚   â””â”€â”€ ğŸ“‚ resources/               # èµ„æºæ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ mapper/              # MyBatis XML æ˜ å°„æ–‡ä»¶
â”‚   â”‚       â”‚   â”œâ”€â”€ UserMapper.xml      # SQL æ˜ å°„å®šä¹‰
â”‚   â”‚       â”‚   â””â”€â”€ ProductMapper.xml
â”‚   â”‚       â”œâ”€â”€ ğŸ“‚ db/migration/        # æ•°æ®åº“è¿ç§»è„šæœ¬ï¼ˆå¯é€‰ï¼‰
â”‚   â”‚       â”‚   â””â”€â”€ V1__init_tables.sql # Flyway/Liquibase è„šæœ¬
â”‚   â”‚       â”œâ”€â”€ application.yml         # ä¸»é…ç½®æ–‡ä»¶
â”‚   â”‚       â”œâ”€â”€ application-dev.yml     # å¼€å‘ç¯å¢ƒé…ç½®
â”‚   â”‚       â”œâ”€â”€ application-prod.yml    # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”‚   â”‚       â””â”€â”€ logback-spring.xml      # æ—¥å¿—é…ç½®
â”‚   â””â”€â”€ ğŸ“‚ test/                        # æµ‹è¯•ä»£ç 
â”‚       â””â”€â”€ kotlin/com/example/myapp/   # æµ‹è¯•åŒ…
â”‚           â”œâ”€â”€ UserControllerTest.kt   # æ§åˆ¶å™¨æµ‹è¯•
â”‚           â”œâ”€â”€ UserServiceTest.kt      # æœåŠ¡å±‚æµ‹è¯•
â”‚           â””â”€â”€ TestContainersConfig.kt # é›†æˆæµ‹è¯•é…ç½®ï¼ˆç”¨äºæ•°æ®åº“æµ‹è¯•ï¼‰
â”œâ”€â”€ ğŸ“‚ build/generated/                 # ç”Ÿæˆçš„æºä»£ç ï¼ˆç¼–è¯‘æ—¶ï¼‰
â”‚   â””â”€â”€ ğŸ“‚ mapper/                      # MyBatis åŠ¨æ€ä»£ç†ç±»ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ build.gradle.kts                    # Gradle æ„å»ºè„šæœ¬
â”œâ”€â”€ settings.gradle.kts                 # Gradle é¡¹ç›®è®¾ç½®
â”œâ”€â”€ gradlew                            # Gradle Wrapperï¼ˆLinux/Macï¼‰
â”œâ”€â”€ gradlew.bat                        # Gradle Wrapperï¼ˆWindowsï¼‰
â””â”€â”€ gradle.properties                  # Gradle å±æ€§æ–‡ä»¶
```

ğŸ—ï¸ å„å±‚æ¶æ„ä¸èŒè´£

1. é…ç½®å±‚ (config/)

Â· DatabaseConfig.kt: é…ç½® PostgreSQL/AWS Aurora è¿æ¥æ± ï¼ˆHikariCPï¼‰
Â· MyBatisConfig.kt: é…ç½® MyBatis æ‰«æè·¯å¾„ã€äº‹åŠ¡ç®¡ç†ç­‰
Â· WebConfig.kt: Web ç›¸å…³é…ç½®ï¼ˆæ‹¦æˆªå™¨ã€CORS ç­‰ï¼‰

2. æ§åˆ¶å±‚ (controller/)

Â· èŒè´£: æ¥æ”¶ HTTP è¯·æ±‚ï¼Œå‚æ•°æ ¡éªŒï¼Œè°ƒç”¨æœåŠ¡å±‚ï¼Œè¿”å›å“åº”
Â· ç‰¹ç‚¹: ä½¿ç”¨ @RestController, @RequestMapping æ³¨è§£
Â· ä¸ AWS é›†æˆ: å¯ä»¥åœ¨è¿™é‡Œæ·»åŠ  AWS SDK å®¢æˆ·ç«¯ï¼ˆå¦‚ S3ã€SQSï¼‰

3. æœåŠ¡å±‚ (service/)

Â· æ¥å£å±‚ (service/): å®šä¹‰ä¸šåŠ¡é€»è¾‘æ¥å£
Â· å®ç°å±‚ (service/impl/): å®ç°å…·ä½“ä¸šåŠ¡é€»è¾‘ï¼Œè°ƒç”¨æ•°æ®è®¿é—®å±‚
Â· äº‹åŠ¡ç®¡ç†: é€šå¸¸åœ¨æœåŠ¡å±‚ä½¿ç”¨ @Transactional

4. æ•°æ®è®¿é—®å±‚ (repository/ å’Œ mapper/)

Â· Repository æ¥å£: å®šä¹‰æ•°æ®æ“ä½œæ–¹æ³•ï¼ˆKotlin æ¥å£ï¼‰
Â· Mapper æ¥å£: MyBatis çš„ DAO æ¥å£ï¼Œä¸ XML æ˜ å°„æ–‡ä»¶å¯¹åº”
Â· XML Mapper: åœ¨ resources/mapper/ ä¸­å®šä¹‰å¤æ‚ SQL

5. æ¨¡å‹å±‚ (model/)

Â· Entity: ä¸æ•°æ®åº“è¡¨ä¸€ä¸€å¯¹åº”çš„å®ä½“ç±»
Â· DTO: ç”¨äº API ä¼ è¾“çš„æ•°æ®å¯¹è±¡ï¼Œä¸ Entity åˆ†ç¦»
Â· Request/Response: ç‰¹å®š API çš„è¯·æ±‚/å“åº”å¯¹è±¡

ğŸ”— æŠ€æœ¯æ ˆç‰¹å®šé…ç½®è¦ç‚¹

Gradle é…ç½® (build.gradle.kts)

```kotlin
plugins {
    kotlin("jvm") version "1.9.0"
    kotlin("plugin.spring") version "1.9.0"
    id("org.springframework.boot") version "3.1.5"
    id("io.spring.dependency-management") version "1.1.3"
}

dependencies {
    // Spring Boot
    implementation("org.springframework.boot:spring-boot-starter-web")
    implementation("org.springframework.boot:spring-boot-starter-validation")
    
    // Kotlin
    implementation("com.fasterxml.jackson.module:jackson-module-kotlin")
    implementation("org.jetbrains.kotlin:kotlin-reflect")
    
    // MyBatis
    implementation("org.mybatis.spring.boot:mybatis-spring-boot-starter:3.0.2")
    
    // PostgreSQL / AWS Aurora
    runtimeOnly("org.postgresql:postgresql")
    
    // AWS SDK (å¯é€‰)
    implementation(platform("software.amazon.awssdk:bom:2.20.0"))
    implementation("software.amazon.awssdk:rds") // Aurora ç®¡ç†
    implementation("software.amazon.awssdk:secretsmanager") // å¯†ç ç®¡ç†
    
    // æµ‹è¯•
    testImplementation("org.springframework.boot:spring-boot-starter-test")
    testImplementation("org.testcontainers:postgresql:1.19.0")
}
```

æ•°æ®åº“é…ç½® (application.yml)

```yaml
spring:
  datasource:
    url: jdbc:postgresql://your-aurora-cluster.cluster-xxx.us-east-1.rds.amazonaws.com:5432/mydb
    username: ${DB_USERNAME}
    password: ${DB_PASSWORD} # å»ºè®®ä½¿ç”¨ AWS Secrets Manager
    hikari:
      maximum-pool-size: 10
      connection-timeout: 30000

mybatis:
  mapper-locations: classpath:mapper/*.xml
  type-aliases-package: com.example.myapp.model.entity
  configuration:
    map-underscore-to-camel-case: true # ä¸‹åˆ’çº¿è½¬é©¼å³°
```

AWS Aurora è¿æ¥æœ€ä½³å®è·µ

1. ä½¿ç”¨ IAM æ•°æ®åº“è®¤è¯ï¼ˆè€Œä¸æ˜¯ç”¨æˆ·åå¯†ç ï¼‰
2. é€šè¿‡ Secrets Manager ç®¡ç†å‡­è¯
3. é…ç½®è¯»å†™åˆ†ç¦»ï¼ˆè¿æ¥åˆ° Aurora é›†ç¾¤ç«¯ç‚¹ï¼‰
4. å¯ç”¨è¿æ¥æ± åº”å¯¹ Lambda å†·å¯åŠ¨

ğŸš€ å¿«é€Ÿå¯åŠ¨æµç¨‹

1. ç”Ÿæˆé¡¹ç›®: ä½¿ç”¨ start.spring.io é€‰æ‹© Kotlin + Gradle
2. æ·»åŠ ä¾èµ–: æŒ‰ä¸Šé¢çš„ Gradle é…ç½®æ·»åŠ 
3. é…ç½®æ•°æ®åº“: æ ¹æ®ç¯å¢ƒé…ç½®ä¸åŒæ•°æ®æº
4. åˆ›å»ºå®ä½“å’ŒMapper: ä» Entity â†’ Mapper â†’ XML â†’ Repository â†’ Service â†’ Controller
5. å¯ç”¨ MyBatis æ‰«æ: åœ¨ä¸»ç±»æ·»åŠ  @MapperScan("com.example.myapp.mapper")

ğŸ“Š æ¶æ„æ•°æ®æµ

```
HTTP Request â†’ Controller â†’ Service â†’ Repository â†’ Mapper â†’ XML â†’ PostgreSQL/Aurora
                                         â†‘
Response â† DTOè½¬æ¢ â† Entity â† æ•°æ®åº“ç»“æœé›†
```

è¿™ç§åˆ†å±‚ç»“æ„ç¡®ä¿äº†å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œä¾¿äºå›¢é˜Ÿåä½œå’Œæµ‹è¯•è¦†ç›–ã€‚æ ¹æ®é¡¹ç›®è§„æ¨¡ï¼Œä½ è¿˜å¯ä»¥æ·»åŠ  common/ ç›®å½•æ”¾å·¥å…·ç±»ï¼Œaspect/ ç›®å½•æ”¾ AOP åˆ‡é¢ç­‰æ¨¡å—ã€‚

å¦‚æœä½ éœ€è¦æŸä¸ªç‰¹å®šéƒ¨åˆ†ï¼ˆå¦‚å®Œæ•´çš„ MyBatis XML ç¤ºä¾‹ã€AWS SDK é›†æˆä»£ç æˆ–æµ‹è¯•é…ç½®ï¼‰çš„è¯¦ç»†ä»£ç ï¼Œæˆ‘å¯ä»¥ä¸ºä½ è¿›ä¸€æ­¥å±•å¼€ã€‚