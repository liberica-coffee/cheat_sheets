完全可以 👍。你可以自己写一个浏览器插件（Chrome/Edge 扩展），来自动调整 Confluence 页面上的表格列宽。核心思路是：扩展在页面加载时注入一段 JavaScript/CSS，遍历所有表格并统一设置列宽。

---

🚀 基本步骤

1. 创建扩展目录• 建一个文件夹，例如 confluence-table-fix/。

2. 编写 manifest.json{
  "manifest_version": 3,
  "name": "Confluence Table Auto Width",
  "version": "1.0",
  "description": "自动调整 Confluence 表格列宽",
  "permissions": ["scripting", "activeTab"],
  "content_scripts": [
    {
      "matches": ["https://your-confluence-domain/*"],
      "js": ["content.js"]
    }
  ]
}

3. 编写 content.jsfunction adjustTables() {
  const tables = document.querySelectorAll("table.confluenceTable");
  tables.forEach(table => {
    const cols = table.querySelectorAll("tr:first-child td, tr:first-child th");
    const colCount = cols.length;
    const widthPercent = 100 / colCount;

    cols.forEach((col, i) => {
      table.querySelectorAll(`tr td:nth-child(${i+1}), tr th:nth-child(${i+1})`)
           .forEach(cell => {
             cell.style.width = widthPercent + "%";
             cell.style.wordBreak = "break-word"; // 避免文字撑开
           });
    });
  });
}

// 页面加载后执行
window.addEventListener("load", adjustTables);

4. 加载扩展• 打开 Chrome/Edge → 扩展程序 → 加载已解压的扩展程序 → 选择你的文件夹。



---

⚖️ 注意事项

• 如果 Confluence 页面是动态加载的（SPA），可能需要用 MutationObserver 监听 DOM 变化，实时调整表格。
• 你可以在 manifest.json 的 matches 里写成 *://*.atlassian.net/*，这样适配所有 Confluence Cloud 页面。
• 如果想更灵活，可以做一个 右键菜单按钮，点击时才执行调整。


---

要不要我帮你写一个 升级版脚本，支持动态加载（MutationObserver），这样即使你在 Confluence 页面里切换标签或展开内容，表格也会自动调整？



好的，那我给你一个 升级版浏览器插件脚本，支持 动态加载（MutationObserver），这样即使 Confluence 页面里切换标签或展开内容，表格也会自动调整列宽。

---

📂 文件结构

confluence-table-fix/
 ├─ manifest.json
 └─ content.js


---

📜 manifest.json

{
  "manifest_version": 3,
  "name": "Confluence Table Auto Width",
  "version": "1.1",
  "description": "自动调整 Confluence 表格列宽（支持动态加载）",
  "permissions": ["scripting", "activeTab"],
  "content_scripts": [
    {
      "matches": ["https://*.atlassian.net/*"],
      "js": ["content.js"],
      "run_at": "document_idle"
    }
  ]
}


---

📜 content.js

function adjustTables() {
  const tables = document.querySelectorAll("table.confluenceTable");
  tables.forEach(table => {
    const firstRow = table.querySelector("tr");
    if (!firstRow) return;

    const cols = firstRow.querySelectorAll("td, th");
    const colCount = cols.length;
    if (colCount === 0) return;

    const widthPercent = 100 / colCount;

    cols.forEach((col, i) => {
      table.querySelectorAll(`tr td:nth-child(${i+1}), tr th:nth-child(${i+1})`)
        .forEach(cell => {
          cell.style.width = widthPercent + "%";
          cell.style.wordBreak = "break-word"; // 避免文字撑开
        });
    });
  });
}

// 初次加载执行
window.addEventListener("load", adjustTables);

// 监听 DOM 变化（动态加载）
const observer = new MutationObserver(() => {
  adjustTables();
});

observer.observe(document.body, {
  childList: true,
  subtree: true
});


---

⚙️ 使用方法

1. 打开 Chrome/Edge → 扩展程序 → 加载已解压的扩展程序 → 选择 confluence-table-fix/ 文件夹。
2. 打开 Confluence 页面，表格会自动调整列宽。
3. 如果页面是 SPA（单页应用），MutationObserver 会自动在内容更新时重新调整。


---

这样你就有一个 自动化插件，能保证所有 Confluence 表格列宽统一，不管是初次加载还是动态展开。

要不要我再帮你加一个 配置选项（比如固定宽度 vs 平均分配），让你在插件里自由切换？


太好了 🙌，那我们就把插件升级一下，加上 配置选项，让你可以自由选择「固定宽度」还是「平均分配」。这样你在不同场景下都能灵活调整。

---

📂 文件结构

confluence-table-fix/
 ├─ manifest.json
 ├─ content.js
 └─ options.html
 └─ options.js


---

📜 manifest.json

{
  "manifest_version": 3,
  "name": "Confluence Table Auto Width",
  "version": "1.2",
  "description": "自动调整 Confluence 表格列宽（支持动态加载 + 配置选项）",
  "permissions": ["storage"],
  "options_page": "options.html",
  "content_scripts": [
    {
      "matches": ["https://*.atlassian.net/*"],
      "js": ["content.js"],
      "run_at": "document_idle"
    }
  ]
}


---

📜 options.html

<!DOCTYPE html>
<html>
<head>
  <title>Confluence Table Auto Width 设置</title>
</head>
<body>
  <h2>表格列宽设置</h2>
  <label>
    <input type="radio" name="mode" value="fixed"> 固定宽度 (150px)
  </label><br>
  <label>
    <input type="radio" name="mode" value="average"> 平均分配 (100% / 列数)
  </label><br>
  <button id="save">保存</button>

  <script src="options.js"></script>
</body>
</html>


---

📜 options.js

document.addEventListener("DOMContentLoaded", () => {
  chrome.storage.sync.get("mode", data => {
    if (data.mode) {
      document.querySelector(`input[value=${data.mode}]`).checked = true;
    }
  });

  document.getElementById("save").addEventListener("click", () => {
    const mode = document.querySelector("input[name=mode]:checked").value;
    chrome.storage.sync.set({ mode });
    alert("设置已保存！");
  });
});


---

📜 content.js

function adjustTables(mode) {
  const tables = document.querySelectorAll("table.confluenceTable");
  tables.forEach(table => {
    const firstRow = table.querySelector("tr");
    if (!firstRow) return;

    const cols = firstRow.querySelectorAll("td, th");
    const colCount = cols.length;
    if (colCount === 0) return;

    cols.forEach((col, i) => {
      table.querySelectorAll(`tr td:nth-child(${i+1}), tr th:nth-child(${i+1})`)
        .forEach(cell => {
          if (mode === "fixed") {
            cell.style.width = "150px";
          } else {
            cell.style.width = (100 / colCount) + "%";
          }
          cell.style.wordBreak = "break-word";
        });
    });
  });
}

function init() {
  chrome.storage.sync.get("mode", data => {
    const mode = data.mode || "average"; // 默认平均分配
    adjustTables(mode);
  });
}

// 初次加载执行
window.addEventListener("load", init);

// 监听 DOM 变化（动态加载）
const observer = new MutationObserver(init);
observer.observe(document.body, { childList: true, subtree: true });


---

⚙️ 使用方法

1. 在 Chrome/Edge 扩展里加载这个文件夹。
2. 打开 Confluence 页面，表格会自动调整。
3. 在扩展的 选项页里选择「固定宽度」或「平均分配」，保存后立即生效。


---

这样你就有一个 可配置的自动化插件，既能保证表格美观，又能灵活切换模式。

要不要我再帮你加一个 快捷键触发功能（比如按下 Ctrl+Shift+T 就重新调整当前页面表格），方便你手动刷新布局？


