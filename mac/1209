å¤ªå¥½äº† ğŸ‘
è¿™é‡Œç»™ä½ ä¸€ä¸ªé€šç”¨çš„ Kotlin å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥æ‹¿æ¥è°ƒè¯•å’ŒæŸ¥çœ‹ æŸä¸ª data class ä»å£°æ˜å¼€å§‹åˆ°æ–‡ä»¶ç»“å°¾ï¼ŒåŒ…æ‹¬å‰é¢çš„æ³¨é‡Šå’Œæ³¨è§£ï¼š

fun extractDataClassBlock(source: String, className: String? = null): String? {
    // å¦‚æœæŒ‡å®šäº†ç±»åï¼Œå°±ç²¾ç¡®åŒ¹é…ï¼›å¦åˆ™åŒ¹é…ç¬¬ä¸€ä¸ª data class
    val pattern = if (className != null) {
        """(?s)(?:\s*//.*\n|\s*/\*.*?\*/\s*|\s*@\w+.*\n)*\s*data\s+class\s+$className.*$"""
    } else {
        """(?s)(?:\s*//.*\n|\s*/\*.*?\*/\s*|\s*@\w+.*\n)*\s*data\s+class.*$"""
    }
    val regex = Regex(pattern)
    return regex.find(source)?.value
}


ä½¿ç”¨ç¤ºä¾‹

val sourceCode = """
// è¿™æ˜¯æ³¨é‡Š
/* å¤šè¡Œæ³¨é‡Š */
@Serializable
data class Person(val name: String, val age: Int)

// å…¶ä»–ä»£ç 
fun main() { println("Hello") }
"""

val result = extractDataClassBlock(sourceCode, "Person")
println(result)


ğŸ‘‰ è¾“å‡ºä¼šåŒ…å«ï¼š

â€¢ å‰é¢çš„æ³¨é‡Š
â€¢ æ³¨è§£
â€¢ æ•´ä¸ª data class åˆ°æ–‡ä»¶æœ«å°¾


---

è°ƒè¯•æŠ€å·§

â€¢ å¦‚æœä½ æƒ³åŒ¹é…å¤šä¸ª data classï¼Œå¯ä»¥ç”¨ findAll è€Œä¸æ˜¯ findã€‚
â€¢ å¦‚æœæ–‡ä»¶å¾ˆå¤§ï¼Œå»ºè®®å…ˆç”¨ substringAfter("data class") å®šä½ï¼Œå†ç”¨æ­£åˆ™ç²¾ç»†åŒ¹é…ã€‚
â€¢ åœ¨ IDE é‡Œå¯ä»¥ç›´æ¥æ‰“å° resultï¼Œç¡®è®¤æ˜¯å¦åŒ…å«é¢„æœŸçš„æ³¨é‡Šå’Œæ³¨è§£ã€‚


---

è¦ä¸è¦æˆ‘å¸®ä½ æ‰©å±•ä¸€ä¸‹è¿™ä¸ªå‡½æ•°ï¼Œè®©å®ƒèƒ½ è¿”å›å¤šä¸ªåŒ¹é…ç»“æœåˆ—è¡¨ï¼Œè€Œä¸æ˜¯åªå–ç¬¬ä¸€ä¸ªï¼Ÿè¿™æ ·ä½ å°±èƒ½ä¸€æ¬¡æ€§æå–æ–‡ä»¶é‡Œæ‰€æœ‰çš„ data class ç‰‡æ®µã€‚