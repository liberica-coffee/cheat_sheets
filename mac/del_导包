Kotlin å¯¼åŒ…è·¯å¾„è¯¦è§£

Kotlin çš„å¯¼å…¥è·¯å¾„æ˜¯åŸºäºåŒ…çš„å£°æ˜å’Œæºä»£ç çš„ç»„ç»‡ç»“æ„ï¼Œè®©æˆ‘è¯¦ç»†ä¸ºä½ è§£é‡Šï¼š

ğŸ“ åŸºæœ¬è§„åˆ™ï¼šåŒ…å£°æ˜å†³å®šå¯¼å…¥è·¯å¾„

1. åŒ…å£°æ˜ä¸ç›®å½•ç»“æ„å¿…é¡»å¯¹åº”

```kotlin
// æ–‡ä»¶ä½ç½®ï¼šsrc/main/kotlin/com/example/myapp/Main.kt
package com.example.myapp  // â† åŒ…å£°æ˜å¿…é¡»åŒ¹é…ç›®å½•ç»“æ„

fun main() {
    println("Hello from com.example.myapp")
}
```

ğŸ¯ å¯¼å…¥è·¯å¾„çš„å‡ ç§æƒ…å†µ

æƒ…å†µ1ï¼šæ ‡å‡†é¡¹ç›®ç»“æ„ï¼ˆGradle/Mavenï¼‰

```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ kotlin/          â† Kotlinæºä»£ç æ ¹ç›®å½•
â”‚   â”‚   â”‚   â”œâ”€â”€ com/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ example/
â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ myapp/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Main.kt          // package com.example.myapp
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ User.kt      // package com.example.myapp.model
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚   â”‚   â”‚   â”‚   â”‚       â”œâ”€â”€ StringUtils.kt // package com.example.myapp.utils
â”‚   â”‚   â”‚   â”‚   â”‚   â””â”€â”€ network/
â”‚   â”‚   â”‚   â”‚   â”‚       â””â”€â”€ Api.kt           // package com.example.network
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ shared/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ Constants.kt         // package com.shared
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â””â”€â”€ test/
â””â”€â”€ build.gradle.kts
```

å¯¼å…¥ç¤ºä¾‹ï¼š

```kotlin
// åœ¨ Main.kt (com.example.myapp) ä¸­ï¼š

// 1. å¯¼å…¥åŒä¸€åŒ…çš„æ–‡ä»¶ï¼ˆå¯é€‰ï¼‰
// import com.example.myapp.someFunction  // å¯ä»¥çœç•¥ï¼Œå› ä¸ºåŒä¸€åŒ…

// 2. å¯¼å…¥å­åŒ…
import com.example.myapp.model.User
import com.example.myapp.utils.StringUtils.formatString

// 3. å¯¼å…¥å…„å¼ŸåŒ…ï¼ˆä¸åŒç›®å½•ï¼Œä½†åŒä¸€çˆ¶åŒ…ï¼‰
import com.example.network.Api

// 4. å¯¼å…¥ä¸åŒçˆ¶åŒ…
import com.shared.Constants.APP_NAME

// 5. å¯¼å…¥æ ‡å‡†åº“ï¼ˆä»ç±»è·¯å¾„å¼€å§‹ï¼‰
import kotlin.collections.*
import java.util.ArrayList
```

æƒ…å†µ2ï¼šé»˜è®¤åŒ…ï¼ˆä¸æ¨èï¼‰

```kotlin
// æ–‡ä»¶ä½ç½®ï¼šsrc/main/kotlin/Utils.kt
// æ²¡æœ‰ package å£°æ˜ â†’ åœ¨é»˜è®¤åŒ…ä¸­

fun utilityFunction() = "Utility"

// åœ¨å…¶ä»–æ–‡ä»¶ä¸­å¯¼å…¥ï¼š
import utilityFunction  // ç›´æ¥å¯¼å…¥å‡½æ•°å
// æˆ–è€…ä½¿ç”¨å®Œå…¨é™å®šå
```

æƒ…å†µ3ï¼šæ¨¡å—åŒ–é¡¹ç›®

```
é¡¹ç›®æ ¹ç›®å½•/
â”œâ”€â”€ app/                    â† Androidåº”ç”¨æ¨¡å—
â”‚   â”œâ”€â”€ src/main/kotlin/com/example/app/
â”‚   â””â”€â”€ build.gradle.kts
â”œâ”€â”€ core/                   â† æ ¸å¿ƒæ¨¡å—
â”‚   â”œâ”€â”€ src/main/kotlin/com/example/core/
â”‚   â””â”€â”€ build.gradle.kts
â”œâ”€â”€ data/                   â† æ•°æ®æ¨¡å—
â”‚   â”œâ”€â”€ src/main/kotlin/com/example/data/
â”‚   â””â”€â”€ build.gradle.kts
â””â”€â”€ settings.gradle.kts
```

æ¨¡å—é—´å¯¼å…¥ï¼š

```kotlin
// 1. åœ¨ app æ¨¡å—çš„ build.gradle.kts ä¸­æ·»åŠ ä¾èµ–ï¼š
dependencies {
    implementation(project(":core"))
    implementation(project(":data"))
}

// 2. åœ¨ app æ¨¡å—ä»£ç ä¸­å¯¼å…¥ï¼š
import com.example.core.utils.*      // ä» core æ¨¡å—
import com.example.data.repository.*  // ä» data æ¨¡å—
```

ğŸ” å¯¼å…¥è·¯å¾„çš„è§£æè¿‡ç¨‹

ç¼–è¯‘å™¨å¦‚ä½•æŸ¥æ‰¾ç±»ï¼š

1. å½“å‰åŒ… â†’ 2. å¯¼å…¥åˆ—è¡¨ â†’ 3. é»˜è®¤å¯¼å…¥ â†’ 4. ç±»è·¯å¾„

```kotlin
// ç¤ºä¾‹ï¼šæŸ¥æ‰¾ ArrayList
import java.util.ArrayList  // 1. æ˜¾å¼å¯¼å…¥ä¼˜å…ˆ
// import java.util.*      // 2. é€šé…ç¬¦å¯¼å…¥
// 3. å¦‚æœæ²¡æœ‰å¯¼å…¥ï¼Œä¼šæŠ¥é”™ï¼ˆé™¤éåœ¨åŒä¸€åŒ…ï¼‰
```

ğŸ“ å¯¼å…¥è·¯å¾„çš„å†™æ³•è§„åˆ™

1. å®Œå…¨é™å®šåï¼ˆFQN - Fully Qualified Nameï¼‰

```kotlin
// ä»æºä»£ç æ ¹ç›®å½•å¼€å§‹å†™
import com.example.myapp.model.User
import java.util.*
import kotlinx.coroutines.CoroutineScope
```

2. ç›¸å¯¹å¯¼å…¥ï¼ˆä¸æ¨èï¼Œä¸”æœ‰é™åˆ¶ï¼‰

```kotlin
// âŒ Kotlin ä¸æ”¯æŒçœŸæ­£çš„ç›¸å¯¹å¯¼å…¥
// import .model.User  // é”™è¯¯ï¼
// import ..network.Api  // é”™è¯¯ï¼
```

3. å¯¼å…¥é¡¶çº§å‡½æ•°å’Œå±æ€§

```kotlin
// æ–‡ä»¶ï¼šsrc/main/kotlin/com/example/utils/Extensions.kt
package com.example.utils

// é¡¶çº§æ‰©å±•å‡½æ•°
fun String.addExclamation(): String = "$this!"

// é¡¶çº§å±æ€§
const val MAX_RETRY_COUNT = 3

// åœ¨å…¶ä»–æ–‡ä»¶å¯¼å…¥ï¼š
import com.example.utils.addExclamation
import com.example.utils.MAX_RETRY_COUNT

val text = "Hello".addExclamation()
```

4. å¯¼å…¥åµŒå¥—ç±»

```kotlin
// æ–‡ä»¶ï¼šsrc/main/kotlin/com/example/ui/Views.kt
package com.example.ui

class Container {
    class NestedView { /*...*/ }
    inner class InnerView { /*...*/ }
}

// å¯¼å…¥ä½¿ç”¨ï¼š
import com.example.ui.Container.NestedView
// InnerView éœ€è¦å¤–éƒ¨ç±»å®ä¾‹ï¼Œé€šå¸¸ä¸å•ç‹¬å¯¼å…¥
```

ğŸš€ å®é™…é¡¹ç›®ä¸­çš„å¯¼å…¥æ¨¡å¼

æ¨¡å¼1ï¼šæŒ‰åŠŸèƒ½åˆ†åŒ…

```
com/
â”œâ”€â”€ example/
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ MainActivity.kt
â”‚   â”‚   â””â”€â”€ di/
â”‚   â”œâ”€â”€ feature/
â”‚   â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginViewModel.kt
â”‚   â”‚   â”‚   â””â”€â”€ AuthRepository.kt
â”‚   â”‚   â””â”€â”€ home/
â”‚   â”‚       â”œâ”€â”€ HomeViewModel.kt
â”‚   â”‚       â””â”€â”€ HomeRepository.kt
â”‚   â”œâ”€â”€ data/
â”‚   â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ local/
â”‚   â”‚   â””â”€â”€ remote/
â”‚   â””â”€â”€ core/
â”‚       â”œâ”€â”€ utils/
â”‚       â”œâ”€â”€ di/
â”‚       â””â”€â”€ network/
```

å¯¼å…¥ç¤ºä¾‹ï¼š

```kotlin
// åœ¨ LoginViewModel.kt ä¸­ï¼š
package com.example.feature.auth

// å¯¼å…¥åŒä¸€æ¨¡å—çš„å…¶ä»–æ–‡ä»¶
import com.example.feature.auth.AuthRepository
import com.example.feature.auth.model.LoginRequest

// å¯¼å…¥æ•°æ®å±‚
import com.example.data.model.User
import com.example.data.repository.UserRepository

// å¯¼å…¥æ ¸å¿ƒæ¨¡å—
import com.example.core.utils.NetworkUtils
import com.example.core.di.inject

// å¯¼å…¥ç¬¬ä¸‰æ–¹åº“
import androidx.lifecycle.ViewModel
import javax.inject.Inject
```

æ¨¡å¼2ï¼šæŒ‰å±‚çº§åˆ†åŒ…ï¼ˆClean Architectureï¼‰

```
com/
â”œâ”€â”€ example/
â”‚   â”œâ”€â”€ presentation/    â† UIå±‚
â”‚   â”‚   â”œâ”€â”€ MainActivity.kt
â”‚   â”‚   â””â”€â”€ viewmodel/
â”‚   â”œâ”€â”€ domain/          â† ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”œâ”€â”€ model/
â”‚   â”‚   â”œâ”€â”€ repository/
â”‚   â”‚   â””â”€â”€ usecase/
â”‚   â””â”€â”€ data/           â† æ•°æ®å±‚
â”‚       â”œâ”€â”€ local/
â”‚       â”œâ”€â”€ remote/
â”‚       â””â”€â”€ repository/
```

å¯¼å…¥ç¤ºä¾‹ï¼š

```kotlin
// åœ¨ ViewModel ä¸­ï¼ˆpresentationå±‚ï¼‰ï¼š
package com.example.presentation.viewmodel

import com.example.domain.usecase.GetUserUseCase  // å¯¼å…¥domainå±‚
import com.example.data.repository.UserRepository // å¯¼å…¥dataå±‚
import androidx.lifecycle.ViewModel

// åªèƒ½å‘ä¸Šå¯¼å…¥ï¼Œä¸èƒ½å‘ä¸‹å¯¼å…¥
// domainå±‚ä¸åº”è¯¥å¯¼å…¥ presentation å±‚çš„ç±»
```

âš¡ å¿«é€Ÿå‚è€ƒï¼šå¯¼å…¥è·¯å¾„èµ·ç‚¹

åœºæ™¯ å¯¼å…¥è·¯å¾„èµ·ç‚¹ ç¤ºä¾‹
æ ‡å‡†åº“ ç›´æ¥å†™ import kotlin.collections.*
JDK ç±» ç›´æ¥å†™ import java.util.ArrayList
ç¬¬ä¸‰æ–¹åº“ ä»åŒ…åå¼€å§‹ import androidx.appcompat.app.AppCompatActivity
é¡¹ç›®ä»£ç  ä»æºä»£ç æ ¹ç›®å½•å¼€å§‹ import com.example.myapp.model.User
åŒä¸€æ¨¡å—ä¸åŒåŒ… ä»å…±åŒæ ¹å¼€å§‹ import com.example.utils.*
ä¸åŒæ¨¡å— é…ç½®ä¾èµ–åç›´æ¥å¯¼å…¥ import com.example.core.utils.*

ğŸ› ï¸ å·¥å…·å’ŒæŠ€å·§

1. IDE è‡ªåŠ¨å¯¼å…¥

Â· IntelliJ IDEA/Android Studioï¼š
  Â· è‡ªåŠ¨æ·»åŠ ç¼ºå°‘çš„å¯¼å…¥ï¼šAlt + Enter
  Â· ä¼˜åŒ–å¯¼å…¥ï¼šCtrl + Alt + O
  Â· æ˜¾ç¤ºå¯¼å…¥æç¤ºï¼šCtrl + Space

2. å¯¼å…¥åˆ«åï¼ˆè§£å†³å‘½åå†²çªï¼‰

```kotlin
// æ–‡ä»¶1ï¼šcom/example/ui/Button.kt
package com.example.ui
class Button { /*...*/ }

// æ–‡ä»¶2ï¼šcom/example/material/Button.kt  
package com.example.material
class Button { /*...*/ }

// åœ¨ä½¿ç”¨å¤„ï¼š
import com.example.ui.Button
import com.example.material.Button as MaterialButton

val uiButton = Button()
val materialButton = MaterialButton()
```

3. å¯¼å…¥æ’é™¤ï¼ˆé¿å…é€šé…ç¬¦è¿‡å¤šï¼‰

```kotlin
// âŒ ä¸æ¨èçš„å†™æ³•ï¼ˆå¯èƒ½å¯¼å…¥ä¸éœ€è¦çš„ç±»ï¼‰
import java.util.*
import kotlin.collections.*

// âœ… æ¨èçš„å†™æ³•ï¼ˆæ˜ç¡®å¯¼å…¥ï¼‰
import java.util.ArrayList
import java.util.HashMap
import kotlin.collections.mapOf
import kotlin.collections.listOf
```

4. å¯¼å…¥é¡ºåºè§„èŒƒ

```kotlin
// å»ºè®®çš„å¯¼å…¥é¡ºåºï¼ˆKotlinå®˜æ–¹é£æ ¼ï¼‰ï¼š
// 1. æ ‡å‡†åº“ï¼ˆkotlin.ï¼‰
import kotlin.math.*
import kotlin.collections.*

// 2. ç¬¬ä¸‰æ–¹åº“
import androidx.activity.*
import com.google.accompanist.*

// 3. é¡¹ç›®å†…éƒ¨æ¨¡å—
import com.example.core.*
import com.example.domain.*

// 4. ç›¸å¯¹å¯¼å…¥ï¼ˆåŒä¸€ä¸ªçˆ¶åŒ…å†…ï¼‰
// é€šå¸¸ä¸å†™ï¼Œå› ä¸ºå¯ä»¥ç›´æ¥è®¿é—®
```

â“ å¸¸è§é—®é¢˜è§£ç­”

Q1ï¼šå¯¼å…¥æ—¶åº”è¯¥ä»å“ªä¸ªç›®å½•å¼€å§‹å†™ï¼Ÿ

Aï¼šä»æºä»£ç æ ¹ç›®å½•ï¼ˆsrc/main/kotlin/ï¼‰ä¸‹çš„ç¬¬ä¸€çº§ç›®å½•å¼€å§‹ã€‚

å¦‚æœé¡¹ç›®ç»“æ„æ˜¯ï¼š

```
src/main/kotlin/com/example/app/Main.kt
```

é‚£ä¹ˆå¯¼å…¥å°±æ˜¯ï¼šimport com.example.app.Main

Q2ï¼šä¸ºä»€ä¹ˆæˆ‘çš„å¯¼å…¥æ‰¾ä¸åˆ°ç±»ï¼Ÿ

å¯èƒ½åŸå› ï¼š

1. åŒ…å£°æ˜ä¸åŒ¹é…ï¼šæ£€æŸ¥æ–‡ä»¶å¼€å¤´çš„ package å£°æ˜
2. ä¾èµ–æœªæ·»åŠ ï¼šç¬¬ä¸‰æ–¹åº“éœ€è¦åœ¨ build.gradle.kts ä¸­æ·»åŠ 
3. æ¨¡å—ä¾èµ–æœªé…ç½®ï¼šå¤šæ¨¡å—é¡¹ç›®éœ€è¦é…ç½® implementation(project(":module"))
4. ç¼–è¯‘é—®é¢˜ï¼šå°è¯• Build â†’ Rebuild Project

Q3ï¼šKotlin æ”¯æŒç›¸å¯¹å¯¼å…¥å—ï¼Ÿ

ä¸æ”¯æŒã€‚ Kotlin åªæ”¯æŒå®Œå…¨é™å®šåå¯¼å…¥ï¼Œå¿…é¡»ä»åŒ…æ ¹å¼€å§‹å†™ã€‚

Q4ï¼šå¦‚ä½•å¯¼å…¥åŒä¸€ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Ÿ

åŒä¸€åŒ…å†…çš„æ–‡ä»¶å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼Œä¸éœ€è¦å¯¼å…¥ï¼š

```kotlin
// æ–‡ä»¶1ï¼šcom/example/utils/StringUtils.kt
package com.example.utils
fun format(str: String) = str.uppercase()

// æ–‡ä»¶2ï¼šcom/example/utils/DateUtils.kt  
package com.example.utils
fun test() {
    format("hello")  // âœ… ç›´æ¥ä½¿ç”¨ï¼Œä¸éœ€è¦å¯¼å…¥
}
```

Q5ï¼šå¯¼å…¥è·¯å¾„å¤§å°å†™æ•æ„Ÿå—ï¼Ÿ

åœ¨å¤§å¤šæ•°ç³»ç»Ÿä¸­æ˜¯æ•æ„Ÿçš„ï¼ˆLinux/macOSï¼‰ã€‚Windows æ–‡ä»¶ç³»ç»Ÿä¸æ•æ„Ÿï¼Œä½†ä¸ºäº†è·¨å¹³å°å…¼å®¹ï¼Œåº”è¯¥ä¸¥æ ¼æŒ‰ç…§å¤§å°å†™ä¹¦å†™ã€‚

ğŸ’¡ æœ€ä½³å®è·µå»ºè®®

1. ä¿æŒåŒ…ç»“æ„æ‰å¹³ï¼šé¿å…è¿‡æ·±çš„åµŒå¥—ï¼ˆä¸è¶…è¿‡3-4çº§ï¼‰
2. ä½¿ç”¨æœ‰æ„ä¹‰çš„åŒ…åï¼šæŒ‰åŠŸèƒ½åˆ†åŒ…ï¼Œè€Œä¸æ˜¯æŒ‰ç±»å‹
3. é…ç½®å¥½ sourceSetsï¼šå¦‚æœæœ‰éæ ‡å‡†ç›®å½•ç»“æ„
4. åˆ©ç”¨ IDE åŠŸèƒ½ï¼šè®© IDE ç®¡ç†å¯¼å…¥ï¼Œä¿æŒæ•´æ´
5. å®šæœŸä¼˜åŒ–å¯¼å…¥ï¼šç§»é™¤æœªä½¿ç”¨çš„å¯¼å…¥

è®°ä½ï¼šå¯¼å…¥è·¯å¾„çš„æœ¬è´¨æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨åœ¨å“ªé‡Œèƒ½æ‰¾åˆ°ç±»/å‡½æ•°/å±æ€§ã€‚åªè¦åŒ…å£°æ˜æ­£ç¡®ã€ä¾èµ–é…ç½®æ­£ç¡®ã€è·¯å¾„ä¹¦å†™æ­£ç¡®ï¼Œå¯¼å…¥å°±èƒ½æ­£å¸¸å·¥ä½œã€‚

ä½ çš„é¡¹ç›®æ˜¯ä½¿ç”¨æ ‡å‡† Gradle ç»“æ„ï¼Œè¿˜æ˜¯æœ‰ç‰¹æ®Šçš„ç›®å½•ç»„ç»‡ï¼Ÿæˆ‘å¯ä»¥æ ¹æ®ä½ çš„å…·ä½“é¡¹ç›®ç»“æ„ç»™å‡ºæ›´é’ˆå¯¹æ€§çš„å»ºè®®ï¼
