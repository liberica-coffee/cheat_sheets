ä¸‹é¢æˆ‘ç»™ä½ ä¸€ä¸ªå®Œå…¨é’ˆå¯¹ HTTPS æ‹‰å– protodep ä¾èµ–çš„ã€å¯ç›´æ¥æ‰§è¡Œçš„é…ç½®æŒ‡å—ã€‚
ä½ å›¢é˜Ÿæ²¡æœ‰ proxy â†’ é‚£ HTTPS æ‹‰å–åªéœ€è¦ æ­£ç¡®è®¾ç½® GitHub è®¤è¯ï¼Œprotodep å°±èƒ½æ­£å¸¸å·¥ä½œã€‚

protodep æœ¬èº«æ²¡æœ‰â€œHTTPS è®¾ç½®â€ï¼Œå®ƒå®Œå…¨ä¾èµ– git clone https://â€¦ çš„è¡Œä¸ºã€‚
æ‰€ä»¥ä½ åªéœ€è¦è®© git èƒ½é€šè¿‡ HTTPS è®¿é—® GitHub ç§æœ‰ä»“åº“ã€‚

---

ğŸ¯ ä½ è¦åšçš„åªæœ‰ä¸¤ä»¶äº‹

âœ… 1. ä¸º HTTPS è®¾ç½® GitHub Tokenï¼ˆå› ä¸ºä½ å¼€å¯äº† 2FAï¼‰

HTTPS + GitHub + 2FA â†’ ä¸èƒ½ç”¨å¯†ç 
å¿…é¡»ç”¨ Personal Access Token (PAT)ã€‚

æ­¥éª¤ï¼šåˆ›å»º Token

GitHub â†’ Settings â†’ Developer settings â†’ Personal access tokens â†’ Tokens (classic)

æƒé™è‡³å°‘éœ€è¦ï¼š

â€¢ repo


å¤åˆ¶ tokenï¼ˆåªæ˜¾ç¤ºä¸€æ¬¡ï¼‰ã€‚

---

âœ… 2. æŠŠ Token é…ç½®ç»™ gitï¼ˆHTTPS æ–¹å¼ï¼‰

ä½ æœ‰ä¸¤ç§æ–¹å¼ï¼šæ¨èæ–¹å¼åœ¨æœ€å‰é¢ã€‚

---

ğŸ¥‡ æ–¹æ³• Aï¼šä½¿ç”¨ `~/.netrc`ï¼ˆæœ€ç¨³å®šã€æœ€å¹²å‡€ã€protodep å®˜æ–¹æ¨èæ–¹å¼ï¼‰

åˆ›å»ºæˆ–ç¼–è¾‘ï¼š

~/.netrc


å†™å…¥ï¼š

machine github.com
  login <your-github-username>
  password <your-token>


ç„¶åï¼š

chmod 600 ~/.netrc


å®Œæˆåï¼ŒHTTPS clone ä¼šè‡ªåŠ¨ä½¿ç”¨ tokenï¼š

git clone https://github.com/your-org/your-repo.git


protodep ä¹Ÿä¼šè‡ªåŠ¨ä½¿ç”¨ï¼š

protodep up


---

ğŸ¥ˆ æ–¹æ³• Bï¼šä½¿ç”¨ git credential helperï¼ˆä¹Ÿå¯ä»¥ï¼‰

git config --global credential.helper store


ç„¶åæ‰§è¡Œä¸€æ¬¡ï¼š

git clone https://github.com/your-org/your-repo.git


git ä¼šæç¤ºä½ è¾“å…¥ï¼š

â€¢ username
â€¢ tokenï¼ˆä½œä¸ºå¯†ç ï¼‰


ä¹‹å git ä¼šæŠŠå®ƒå­˜åˆ°ï¼š

~/.git-credentials


protodep ä¹Ÿä¼šè‡ªåŠ¨è¯»å–ã€‚

---

ğŸ§© protodep çš„é…ç½®ï¼ˆHTTPS URLï¼‰

ä½ çš„ protodep/proto.toml åº”è¯¥å†™æˆï¼š

[[dependencies]]
  target = "github.com/your-org/your-private-repo"
  branch = "main"
  type = "git"
  url = "https://github.com/your-org/your-private-repo.git"
  path = "proto"


ç„¶åï¼š

protodep up


å°±èƒ½æ­£å¸¸æ‹‰å–ã€‚

---

ğŸ§ª å¸¸è§é”™è¯¯æ’æŸ¥ï¼ˆä½ å›¢é˜Ÿå¯èƒ½ä¼šé‡åˆ°ï¼‰

âŒ 1. git é‡Œæ®‹ç•™ proxy

æ£€æŸ¥ï¼š

git config --global --get http.proxy
git config --global --get https.proxy


å¦‚æœæœ‰ï¼Œæ¸…é™¤ï¼š

git config --global --unset http.proxy
git config --global --unset https.proxy


---

âŒ 2. ç¯å¢ƒå˜é‡é‡Œæ®‹ç•™ proxy

æ£€æŸ¥ï¼š

echo $HTTP_PROXY
echo $HTTPS_PROXY


å¦‚æœæœ‰ï¼š

unset HTTP_PROXY
unset HTTPS_PROXY


---

âŒ 3. Token æƒé™ä¸è¶³

ç¡®ä¿è‡³å°‘æœ‰ï¼š

â€¢ repo


---

ğŸ‰ æ€»ç»“ï¼ˆä½ åªéœ€è¦åšè¿™ä¸¤æ­¥ï¼‰

1. åˆ›å»º GitHub Tokenï¼ˆå› ä¸ºä½ æœ‰ 2FAï¼‰

2. æŠŠ Token å†™å…¥ `~/.netrc` æˆ– git credential helper

ä¹‹åï¼š

protodep up


å°±èƒ½æ­£å¸¸é€šè¿‡ HTTPS æ‹‰å–ç§æœ‰ä»“åº“ã€‚

---

å¦‚æœä½ æ„¿æ„ï¼Œæˆ‘å¯ä»¥å¸®ä½ ï¼š

â€¢ æ£€æŸ¥ä½ å½“å‰çš„ git ç¯å¢ƒæ˜¯å¦æ­£ç¡®
â€¢ ç”Ÿæˆä¸€ä¸ªè‡ªåŠ¨æ£€æµ‹è„šæœ¬ï¼ˆmacOS / Linuxï¼‰
â€¢ å¸®ä½ å›¢é˜Ÿå†™ä¸€ä¸ª onboarding æ–‡æ¡£ï¼Œè®©æ–°äºº 5 åˆ†é’Ÿå°±èƒ½è·‘é€š protodep + HTTPS


ä½ æƒ³è®©æˆ‘å¸®ä½ ç”Ÿæˆå“ªä¸€ä¸ªï¼Œæˆ‘å°±å¯ä»¥é©¬ä¸Šåšã€‚


https://copilot.microsoft.com/shares/prtKhyWprZVse6y6qorhP




