スマホ画面の不具合を再現したいのに、テストデータは揃っているのに「スマホ画面が出ず、PC画面が表示されてしまう」――この状況、実務でもよくハマるポイントです。
原因は アプリ側ではなく、フロントエンドのレスポンシブ判定や User-Agent 判定 にあることが多いです。

下に、Arron の環境（Spring Boot / Kotlin / MyBatis / PostgreSQL、フロント・API・Batch 分離構成）でよく起きる再現不能パターンと、再現するための具体的な方法をまとめます。

---

📱 スマホ画面が再現できないときにまず疑うポイント

1. User-Agent 判定が効いていない

スマホ画面を出す仕組みが User-Agent ベース の場合、
PCブラウザでアクセスすると当然 PC 画面になります。

✔ 再現方法

• Chrome の DevTools → Toggle Device Toolbar（スマホアイコン）
• さらに User-Agent をスマホに変更
DevTools → Network → “User-Agent override”
または
DevTools → Command+Shift+P → “Show Network conditions” → UA を iPhone/Android に変更


※ 単に画面幅を狭めただけではスマホ画面にならない実装も多いです。

---

2. レスポンシブ（CSS / JS）で切り替えているが、ブレークポイントが合っていない

スマホ画面が CSS のメディアクエリで切り替わる場合、
画面幅がブレークポイントに入っていないと PC 画面のままです。

✔ 再現方法

• DevTools で画面幅を 320px〜480px に設定
• CSS の @media 条件を確認
例:@media (max-width: 768px) { ... }



---

3. スマホ専用 URL があるが、PC からアクセスしている

よくある構成：

• PC: /web/...
• スマホ: /sp/...


この場合、単に PC で /web/... を開いてもスマホ画面は出ません。

✔ 再現方法

• スマホ用 URL を直接叩く
例:http://localhost:8080/sp/xxxx



---

4. API 側のテストデータは正しいが、フロント側の条件が揃っていない

スマホ画面の表示条件が API のレスポンス以外にも依存しているケース：

• Cookie / Session の値
• ログイン状態
• Feature Flag
• LocalStorage の値
• URL パラメータ


✔ 再現方法

• スマホ画面が出るための 前提条件 を洗い出す
• PCブラウザの DevTools → Application タブで Cookie / LocalStorage を調整


---

5. フロント側のビルドがスマホ用に切り替わっていない

React / Vue / Thymeleaf などでスマホ用ビルドが別になっている場合、
ローカル環境でスマホビルドが走っていない可能性があります。

✔ 再現方法

• スマホ用ビルドコマンドを実行
• またはスマホ用テンプレートが正しくデプロイされているか確認


---

🔍 Arron の状況に特に多い原因（経験上）

あなたの環境だと、以下の2つが最も可能性高いです：

🟦 (A) User-Agent 判定が効いていない

→ DevTools の UA をスマホに変えると再現できることが多い

🟦 (B) スマホ画面の URL が別で、PC URL を開いている

→ /sp/ などのスマホ用パスを直接叩くと再現できる

---

✨ もしよければ、スマホ画面の切り替えロジックを教えてください

• UA 判定
• CSS ブレークポイント
• URL 切り替え
• JS の条件分岐
• Feature Flag
• Cookie / Session


どれでスマホ画面を出す仕組みになっているか分かれば、
もっとピンポイントで「これをやれば再現できる」と断言できます。

必要なら、あなたのプロジェクト構成に合わせて 再現手順をドキュメント化 することもできるよ。

