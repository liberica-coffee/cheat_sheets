スマホ画面の不具合を再現したいのに、テストデータは揃っているのに「スマホ画面が出ず、PC画面が表示されてしまう」――この状況、実務でもよくハマるポイントです。
原因は アプリ側ではなく、フロントエンドのレスポンシブ判定や User-Agent 判定 にあることが多いです。

下に、Arron の環境（Spring Boot / Kotlin / MyBatis / PostgreSQL、フロント・API・Batch 分離構成）でよく起きる再現不能パターンと、再現するための具体的な方法をまとめます。

---

📱 スマホ画面が再現できないときにまず疑うポイント

1. User-Agent 判定が効いていない

スマホ画面を出す仕組みが User-Agent ベース の場合、
PCブラウザでアクセスすると当然 PC 画面になります。

✔ 再現方法

• Chrome の DevTools → Toggle Device Toolbar（スマホアイコン）
• さらに User-Agent をスマホに変更
DevTools → Network → “User-Agent override”
または
DevTools → Command+Shift+P → “Show Network conditions” → UA を iPhone/Android に変更


※ 単に画面幅を狭めただけではスマホ画面にならない実装も多いです。

---

2. レスポンシブ（CSS / JS）で切り替えているが、ブレークポイントが合っていない

スマホ画面が CSS のメディアクエリで切り替わる場合、
画面幅がブレークポイントに入っていないと PC 画面のままです。

✔ 再現方法

• DevTools で画面幅を 320px〜480px に設定
• CSS の @media 条件を確認
例:@media (max-width: 768px) { ... }



---

3. スマホ専用 URL があるが、PC からアクセスしている

よくある構成：

• PC: /web/...
• スマホ: /sp/...


この場合、単に PC で /web/... を開いてもスマホ画面は出ません。

✔ 再現方法

• スマホ用 URL を直接叩く
例:http://localhost:8080/sp/xxxx



---

4. API 側のテストデータは正しいが、フロント側の条件が揃っていない

スマホ画面の表示条件が API のレスポンス以外にも依存しているケース：

• Cookie / Session の値
• ログイン状態
• Feature Flag
• LocalStorage の値
• URL パラメータ


✔ 再現方法

• スマホ画面が出るための 前提条件 を洗い出す
• PCブラウザの DevTools → Application タブで Cookie / LocalStorage を調整


---

5. フロント側のビルドがスマホ用に切り替わっていない

React / Vue / Thymeleaf などでスマホ用ビルドが別になっている場合、
ローカル環境でスマホビルドが走っていない可能性があります。

✔ 再現方法

• スマホ用ビルドコマンドを実行
• またはスマホ用テンプレートが正しくデプロイされているか確認


---

🔍 Arron の状況に特に多い原因（経験上）

あなたの環境だと、以下の2つが最も可能性高いです：

🟦 (A) User-Agent 判定が効いていない

→ DevTools の UA をスマホに変えると再現できることが多い

🟦 (B) スマホ画面の URL が別で、PC URL を開いている

→ /sp/ などのスマホ用パスを直接叩くと再現できる

---

✨ もしよければ、スマホ画面の切り替えロジックを教えてください

• UA 判定
• CSS ブレークポイント
• URL 切り替え
• JS の条件分岐
• Feature Flag
• Cookie / Session


どれでスマホ画面を出す仕組みになっているか分かれば、
もっとピンポイントで「これをやれば再現できる」と断言できます。

必要なら、あなたのプロジェクト構成に合わせて 再現手順をドキュメント化 することもできるよ。

A の User-Agent 判定が効いていない場合の変更方法を、実務で一番確実なやり方から順番にまとめるね。
Arron の環境だと Chrome DevTools で UA をスマホに変えるのが最速で、ほぼ確実に再現できる。

---

📱 A. User-Agent をスマホに変更する方法（Chrome）

✅ 方法1：Network conditions で UA をスマホに変更

1. Chrome を開く
2. F12（DevTools を開く）
3. 右上の「⋮」 → More tools → Network conditions
4. “User-Agent” の Use browser default のチェックを外す
5. プルダウンからスマホ UA を選ぶ• Chrome — Android Mobile
• Chrome — iPhone



これで サーバ側の UA 判定がスマホ扱いになる。

---

✅ 方法2：Device Toolbar（スマホアイコン）＋ UA 変更

1. DevTools を開く
2. 左上のスマホアイコン（Toggle Device Toolbar）を押す
3. 上部のデバイス選択から• iPhone 12
• Pixel 7
などを選ぶ

4. さらに UA をスマホに固定したい場合は
→ Network conditions で UA をスマホに変更


※ Device Toolbar だけだと 画面幅はスマホでも UA は PC のままのことがある。
→ だから UA 変更が必須。

---

📱 Safari（Mac）の場合

1. Safari → Preferences → Advanced
2. 一番下の “Show Develop menu in menu bar” を ON
3. メニューバー → Develop → User Agent
4. iPhone / iPad を選択


---

📱 curl で API をスマホ UA で叩く（API レベルの再現）

もし API 側の挙動もスマホ用に変わるなら、curl で UA を指定して再現できる。

curl -H "User-Agent: Mozilla/5.0 (iPhone; CPU iPhone OS 14_0 like Mac OS X)" \
     http://localhost:8080/your/api


---

🔍 もし UA を変えてもスマホ画面が出ない場合

次のどれかが原因：

• スマホ画面が URL 別（/sp/） になっている
• スマホ画面が CSS のブレークポイントのみで切り替わる
• スマホ画面が Cookie / Session / Feature Flag 依存
• スマホ画面が JS の条件分岐で切り替わる


UA 判定のコード（Java / Kotlin / JS）を見ればすぐ分かる。

---

✨ のプロジェクトに合わせてもっと精密に再現手順作れるよ

もしよければ：

• スマホ画面の切り替えロジック（UA？CSS？URL？）
• フロントの技術（React / Vue / Thymeleaf / JSP など）
• スマホ画面の URL


この3つを教えてくれたら、
「確実にスマホ画面を再現するための手順書」 を作れる。

当然可以，Arron。Chrome 的 Network conditions 面板确实有点隐藏，第一次找的人几乎都会迷路。下面给你一套100% 能打开的步骤，你照着做就能看到。

---

📌 Network conditions 面板的打开方法（Chrome 最新版）

✅ 方法 1：通过 Command Menu 打开（最简单、最可靠）

1. 打开 Chrome
2. 按 F12 打开 DevTools
3. 按 Ctrl + Shift + P（Mac 是 Command + Shift + P）
4. 输入：network conditions

5. 选择：
“Show Network conditions”


👉 这个方法最稳，不需要找菜单。

---

✅ 方法 2：从 DevTools 菜单打开

1. 打开 DevTools（F12）
2. 右上角 ⋮（三点）
3. 选择 More tools
4. 找到 Network conditions


如果你没看到 More tools → Network conditions，说明 Chrome UI 隐藏了它，这时用方法 1 就能强制打开。

---

📱 打开后你会看到什么？

Network conditions 面板里有：

• User-Agent• 默认是 “Use browser default”
• 取消勾选后可以选择• Chrome — Android Mobile
• Chrome — iPhone
• Chrome — Android Tablet
• 等等




你只要把 UA 换成 iPhone/Android，就能让后端识别为“手机访问”。

---

🔧 如果你还是找不到，我可以进一步帮你确认

为了更精准，我想问一句：

你是在 Windows Chrome 还是 macOS Chrome 上操作？

我可以根据你的 OS 给你一套完全对应的截图式步骤。


